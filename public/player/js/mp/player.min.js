"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,l=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){l=!0,n=e},f:function(){try{i||null==o.return||o.return()}finally{if(l)throw n}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(o="Object"===o&&e.constructor?e.constructor.name:o)||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?module.exports=t():"function"==typeof define&&_typeof(define.amd)?define(t):e.MuiPlayer=t()}(window,function(){var MuiPlayer=function MuiPlayer(config){var _this=this;_this._global_={};var webpagePlugin="",mobilePlugin="",hls=null,flv=null,option=config||{},plugins=option.plugins||[];this._event_={};var con="string"==typeof option.container?document.querySelector(option.container):option.container,$CONSTANT,$habit,$node,$global,element,$el,variable,$data,$method;con&&($CONSTANT={unitLengthReg:/^(auto|inherit|initial|\d+(\.\d+)?(\%|px|cm|mm|em|rem|vw|vh|)?)$/i,encodeKey:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"},$habit={themeColor:"#1e98d4"},$node={video:'\x3c!-- HTML5 Video --\x3e<div class="video-wrapper"><video id="myVideo" width="100%" height="100%"></video></div>',mplayerPoster:'<div class="mplayer-poster" id="mplayer-poster"></div>',mplayerCover:'\x3c!-- 媒体播放遮罩层 --\x3e<div class="mplayer-cover" id="mplayer-cover"></div>',mplayerLoading:'\x3c!-- Mplayer加载Loading --\x3e<div class="mplayer-loading"id="mplayer-loading"control><svg viewBox="25 25 50 50"class="mplayer-loading__circular"><circle cx="50"cy="50"r="20"fill="none"></circle></svg></div>',mplayerError:'\x3c!-- 视频加载错误显示 --\x3e<div class="mplayer-error"id="mplayer-error"control><div class="errop-tip">视频加载失败，点击刷新</div><svg t="1575125481608"class="icon"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="5893"width="28"height="28"><path d="M513.34 831.74C337.03 831.74 193.6 688.31 193.6 512c0-71.09 23.31-138.85 65.53-194.03v51.61c0 17.67 14.33 32 32 32s32-14.33 32-32V239.45c0-5.87-1.59-11.36-4.34-16.09-0.06-0.1-0.11-0.2-0.17-0.3-0.16-0.28-0.34-0.55-0.51-0.82-0.13-0.2-0.26-0.41-0.39-0.61-0.08-0.13-0.17-0.25-0.26-0.37a35.5 35.5 0 0 0-1.58-2.13c-6.81-8.35-16.96-12.35-26.95-11.69h-130c-17.67 0-32 14.33-32 32s14.33 32 32 32h55.35C159.8 339 129.6 423.35 129.6 512c0 51.79 10.15 102.05 30.17 149.38 19.33 45.7 46.99 86.74 82.23 121.97 35.23 35.23 76.27 62.9 121.97 82.23 47.33 20.02 97.59 30.17 149.38 30.17 17.67 0 32-14.33 32-32s-14.34-32.01-32.01-32.01zM855.38 762.3h-51.23c19.81-23 36.93-48.3 50.75-75.22 27.6-53.74 42.18-114.28 42.18-175.08 0-51.79-10.15-102.05-30.17-149.38-19.33-45.7-46.99-86.73-82.23-121.97-35.23-35.23-76.27-62.9-121.97-82.23-47.33-20.02-97.59-30.17-149.38-30.17-17.67 0-32 14.33-32 32s14.33 32 32 32c176.31 0 319.74 143.44 319.74 319.74 0 78.31-27.68 151.61-77.6 209.05l0.24-56.04c0.08-17.67-14.19-32.06-31.86-32.14h-0.14c-17.61 0-31.92 14.24-32 31.86l-0.55 129.43a31.988 31.988 0 0 0 9.32 22.71 31.68 31.68 0 0 0 5.33 4.3c0.02 0.01 0.04 0.02 0.06 0.04 0.48 0.31 0.97 0.61 1.47 0.89l0.15 0.09c0.5 0.28 1 0.54 1.51 0.8 0.03 0.01 0.05 0.03 0.08 0.04 1.64 0.8 3.34 1.46 5.1 1.98 0.01 0 0.02 0.01 0.03 0.01 0.55 0.16 1.1 0.3 1.66 0.43 0.07 0.02 0.15 0.03 0.22 0.05 0.5 0.11 1 0.21 1.5 0.3 0.1 0.02 0.2 0.04 0.3 0.05 0.48 0.08 0.96 0.15 1.44 0.21 0.11 0.01 0.23 0.03 0.34 0.04 0.48 0.05 0.95 0.09 1.43 0.12l0.34 0.03c0.53 0.03 1.07 0.04 1.61 0.05h132.31c17.67 0 32-14.33 32-32s-14.31-31.99-31.98-31.99z"p-id="5894"fill="#ffffff"></path></svg></div>',mplayerHeader:'\x3c!-- Mplayer 顶部导航 --\x3e<div class="mplayer-header"id="mplayer-header"><div class="title-groupt"id="title-groupt"><button class="player-btn header-control back-button keyboard-input"id="back-button"control><div class="title-name"id="title-name"></div></button></div><div class="buttom-group"id="buttom-group"></div></div>',mplayerFooter:'\x3c!-- Mplayer 底部操作控件 --\x3e<div class="mplayer-footer"id="mplayer-footer"><div class="progress"id="progress"><div class="left-part"id="left-part"><button class="player-btn keyboard-input play-switch footer-control"id="play-switch"control>\x3c!--play button--\x3e<div class="_play"><svg t="1574051894346"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="1212"><path d="M324.085 95.787l500.422 300.664c82.373 50.453 79.284 136.946-1.030 186.37v0l-506.6 304.784c-41.187 23.683-87.522 37.068-131.798 9.267-36.037-22.653-46.335-58.691-46.335-97.819v-616.774c0-39.127 13.386-75.166 48.395-97.819 45.305-27.801 94.731-14.416 136.946 11.327v0z"p-id="1213"fill="#ffffff"></path></svg></div>\x3c!--pause button--\x3e<div class="_pause"style="display: none;"><svg t="1574051952939"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="1434"><path d="M248.26311111 515.072c0-110.592-0.22755555-221.184 0.11377778-331.776 0.11377778-35.84 18.20444445-60.87111111 49.26577778-70.99733333 27.53422222-8.87466667 56.88888889 0.34133333 75.32088888 23.77955555 10.58133333 13.42577778 15.13244445 28.89955555 15.01866667 45.96622223-0.11377778 223.11822222 0.11377778 446.23644445-0.22755555 669.35466666-0.11377778 42.55288889-31.06133333 73.27288889-70.54222222 72.81777778-39.25333333-0.45511111-68.72177778-31.51644445-68.94933334-74.52444444-0.34133333-111.50222222 0-223.11822222 0-334.62044445zM638.52088889 516.66488889V193.64977778c0-52.45155555 27.42044445-85.21955555 70.54222222-84.65066667 42.43911111 0.56888889 69.17688889 32.42666667 69.17688889 83.05777778 0.11377778 218.22577778 0.11377778 436.56533333 0 654.79111111 0 38.34311111-17.29422222 63.60177778-49.152 73.95555555-27.648 8.98844445-56.54755555 0-75.43466667-23.552-12.17422222-15.13244445-15.36-32.768-15.24622222-51.76888888 0.22755555-109.568 0.11377778-219.136 0.11377778-328.81777778z"p-id="1435"fill="#ffffff"></path></svg></div></button>\x3c!--直播模式--\x3e<button class="player-btn live-mode footer-control"id="live-mode"control><div class="spot"></div><div class="mode-text">直播</div></button></div>\x3c!--底部进度容器--\x3e<div class="progress-container"id="progress-container">\x3c!--安全进度时长--\x3e<div class="progress-begin"id="progress-begin">开始</div>\x3c!--拖动有效的作用域--\x3e<div class="touch-effective"id="touch-effective">\x3c!--加载进度条总长--\x3e<div class="progress-total"id="progress-total"></div>\x3c!--资源缓存进度--\x3e<div class="progress-buffered"id="progress-buffered"></div>\x3c!--播放进度--\x3e<div class="progress-play"id="progress-play"></div>\x3c!--拖动进度球--\x3e<div class="ball-container"><div class="progress-drag"id="progress-ball"><div class="progress-ball"></div></div></div></div>\x3c!--总时长--\x3e<div class="progress-long"id="progress-long">结束</div></div><div class="right-part"id="right-part">\x3c!--全屏开关--\x3e<button class="player-btn keyboard-input full-switch footer-control"id="full-switch"tooltip="全屏"control><div class="_full"><svg t="1607611836872"class="icon"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="2384"><path d="M842 797.08l-226.07999999-226.08a30 30 0 0 0-42.42000001 42.42000001L799.58 839.5 692 839.5a30 30 0 0 0 0 60L872 899.5a29.91 29.91 0 0 0 30-29.99999999l0-180a30 30 0 0 0-60 0l0 107.57999999zM130.79 128.29A29.91 29.91 0 0 1 152 119.5l180 0a30 30 0 0 1 0 60l-107.58 0 226.08 226.08a30 30 0 0 1-42.42000001 42.42L182 221.92 182 329.50000001a30 30 0 0 1-60 0L122 149.50000001a29.91 29.91 0 0 1 8.79-21.21000001z"fill="#ffffff"p-id="2385"></path></svg></div><div class="_unfull"style="display: none;"><svg t="1607611848290"class="icon"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="2546"><path d="M416.00000001 370.752L174.848 129.59999999a32 32 0 0 0-45.24800001 45.24800001L370.752 416.00000001 256 416a32 32 0 0 0 0 64l192 0a31.904 31.904 0 0 0 32-32L480 256a32 32 0 0 0-64 0l1e-8 114.752z m137.37599999 182.624A31.904 31.904 0 0 1 576 544L768 544a32 32 0 0 1 0 64l-114.752-1e-8 241.15200001 241.15200001a32 32 0 1 1-45.24800001 45.24800001L607.99999999 653.248 608 768a32 32 0 0 1-64 0l0-192a31.904 31.904 0 0 1 9.376-22.624z"fill="#ffffff"p-id="2547"></path></svg></div></button></div></div></div>',miniProgress:'\x3c!-- Mplayer 底部播放迷你进度条 --\x3e<div class="mini-progress"id="mini-progress">\x3c!--加载进度条总长--\x3e<div class="mini-total"id="mini-total"></div>\x3c!--资源缓存进度--\x3e<div class="mini-buffered"id="mini-buffered"></div>\x3c!--播放进度--\x3e<div class="mini-play"id="mini-play"></div></div>'},$global=function(){return{first_authplay:!1,isReady:!1,webpagePlugin:{},mobilePlugin:{},cssAutoprefixer:["webkit","ms","moz","o"]}},element=function(){return{mPlayer:con,videoObject:con.querySelector("video"),mplayerCover:con.querySelector("#mplayer-cover"),mplayerPoster:con.querySelector("#mplayer-poster"),mplayerHeader:con.querySelector("#mplayer-header"),headerMenu:con.querySelector("#buttom-group"),backButton:con.querySelector("#back-button"),mplayerFooter:con.querySelector("#mplayer-footer"),progressContainer:con.querySelector("#progress-container"),playSwitch:con.querySelector("#play-switch"),fullSwitch:con.querySelector("#full-switch"),progressBall:con.querySelector("#progress-ball"),progressBegin:con.querySelector("#progress-begin"),progressLong:con.querySelector("#progress-long"),touchEffective:con.querySelector("#touch-effective"),progressBuffered:con.querySelector("#progress-buffered"),progressPlay:con.querySelector("#progress-play"),miniProgress:con.querySelector("#mini-progress"),miniBuffered:con.querySelector("#mini-buffered"),miniPlay:con.querySelector("#mini-play"),mplayerLoading:con.querySelector("#mplayer-loading"),mplayerError:con.querySelector("#mplayer-error")}},$el=new element,variable=function(){return{mediaPlayDirectives:0,isFullScreen:!1,showScreenControls:!1,ball_move_status:!1,isPlay:!1,mediaStatus:!1,duration:0,percentage:0,currentTime:0,playError:0,isDestroy:!1,isShowRightSidebar:!1,startX:null,startY:null,moveX:null,moveY:null,_defaultPlayProgressPro:null,isTouchMove:!1,isControlsTimer:!0}},$data=new variable,$method={getLanguageText:function(){return{"zh-cn":{srcNull:"视频地址为空",begin:"开始",end:"结束",live:"直播",settings:"设置",coveredPlay:"铺满播放",loopPlay:"循环播放",playbackSpeed:"播放速度",share:"分享",pictureInPicture:"画中画",exitPictureInPicture:"退出画中画",pageScreen:"网页全屏",exitPageScreen:"退出网页全屏",fullScreen:"全屏",exitFullScreen:"退出全屏",normal:"正常",open:"打开",subtitles:"字幕",selectLangage:"选择语言",dsps:"切换到默认倍速度播放",tsps:"切换到?倍速度播放",errorTip:"视频加载失败，点击刷新",shortcuts:"快捷键",shortcutsPanel:{title:"快捷功能",space:"空格",spaceAction:"播放/暂停",esc:"退出全屏",up:"音量增加5%",down:"音量减少5%",right:"快进5秒",left:"快退5秒"},advertise:"广告"},en:{srcNull:"Video address is empty",begin:"Begin",end:"End",live:"Live",settings:"Settings",coveredPlay:"Covered play",loopPlay:"Loop play",playbackSpeed:"Playback speed",share:"Share",pictureInPicture:"Picture in picture",exitPictureInPicture:"Exit picture in picture",pageScreen:"Page screen",exitPageScreen:"Exit page screen",fullScreen:"Full screen",exitFullScreen:"Exit full screen",normal:"Normal",open:"Open",subtitles:"Subtitles",selectLangage:"Select langage",dsps:"to default speed playback",tsps:"to ?x speed playback",errorTip:"Video failed to load, click refresh",shortcuts:"Shortcuts",shortcutsPanel:{title:"Shortcuts function",space:"Space",spaceAction:"play/pause",esc:"exit full screen",up:"voice increase 5%",down:"voice reduce 5%",right:"fast forward 5 seconds",left:"fast backward 5 seconds"},advertise:"Advertise"},"zh-tw":{srcNull:"視頻地址為空",begin:"開始",end:"結束",live:"直播",settings:"設置",coveredPlay:"鋪滿播放",loopPlay:"循環播放",playbackSpeed:"播放速度",share:"分享",pictureInPicture:"畫中畫",exitPictureInPicture:"退出畫中畫",pageScreen:"網頁全屏",exitPageScreen:"退出網頁全屏",fullScreen:"全屏",exitFullScreen:"退出全屏",normal:"正常",open:"打開",subtitles:"字幕",selectLangage:"選擇語言",dsps:"切換到默認倍速度播放",tsps:"切換到?倍速度播放",errorTip:"視頻加載失敗，點擊刷新",shortcuts:"快捷鍵",shortcutsPanel:{title:"快捷功能",space:"空格",spaceAction:"播放/暫停",esc:"退出全屏",up:"音量增加5%",down:"音量减少5%",right:"快進5秒",left:"快退5秒"},advertise:"廣告"}}},getLangObject:function(){var e=option.lang||navigator.language||navigator.browserLanguage||"zh-cn";return-1!=["zh-cn","en","zh-tw"].indexOf(e.toLowerCase())?$method.getLanguageText()[e.toLowerCase()]:$method.getLanguageText()["zh-cn"]},initCreateMplayer:function(e){for(var t=$node.video+$node.mplayerPoster+$node.mplayerCover+$node.mplayerLoading+$node.mplayerError+$node.mplayerHeader+$node.mplayerFooter+$node.miniProgress,t=$node.logWrite?t+$node.logWrite:t,o=0;o<plugins.length;o++)if(plugins[o]instanceof Object){if("MuiPlayerDesktopPlugin"==plugins[o].name&&"window"==$method.returnSys()){webpagePlugin=plugins[o];break}if("MuiPlayerMobilePlugin"==plugins[o].name&&("androd"==$method.returnSys()||"ios"==$method.returnSys()||!0===plugins[o].webpage)){mobilePlugin=plugins[o];break}}t=t.toString().replace(/<!--.*?-->/g,"");t=$method.createRangeIsDocFragment(t),t=$method.initConifgAttribute(t,e);t=$method.initConfigControl(t),t=$method.initConfigCustom(t),t=$method.initConfigTheme(t);e={option:option,_this:_this,$el:element,$data:$data,$method:$method,$habit:$habit,$CONSTANT:$CONSTANT};mobilePlugin&&(t=mobilePlugin.appendTemplate(t,e)),webpagePlugin&&(t=webpagePlugin.appendTemplate(t,e));e=con.querySelector("#mplayer-media-wrapper");e&&$method.removeNode(con,"#mplayer-media-wrapper"),(e=document.createElement("div")).setAttribute("id","mplayer-media-wrapper"),e.setAttribute("class","player-wrapper"),e.appendChild(t),$el.mPlayer.appendChild(e),option.src?($method.playerReady(),setTimeout(function(){_this._global_.isReady=!0,_this.emit("ready"),setTimeout(function(){$method.onScreenResize({type:"showControls"}),$method.removeOriginControls()},10)},100)):$method.showToast($method.getLangObject().srcNull)},onAction:function(){},removeOriginControls:function(){$el.videoObject.removeAttribute("controls")},playerReady:function(){$method.resetVariable(),!0===option.autoplay&&($data.mediaPlayDirectives=1,$method.onPlay()),$method.toggleEventListenerGlobal("add","playerReady"),$method.toggleEventListenerCustom("add"),$method.nodesObserver()},overloadingEl:function(){$el=new element;for(var e=0,t=Object.keys($el);e<t.length;e++){var o=t[e];"mPlayer"!=o&&($el[o]||($el[o]={style:{},classList:{add:function(){},contains:function(){},remove:function(){}},addEventListener:function(){},removeEventListener:function(){}}),$el[o].querySelector=function(e){e=this.querySelectorAll?this.querySelectorAll(e):[];return e[0]||{exist:!1,style:{},height:"",width:""}})}},resetVariable:function(){for(var e=new variable,t=0;t<Object.keys(e).length;t++){var o=Object.keys(e)[t];$data[o]=e[o]}$method.overloadingEl(),_this._global_=new $global},plusRuntimeHandle:function(e){"resume"==(e=e||{}).type&&(_this._global_._beferPlayState&&$el.videoObject.play(),$data.isFullScreen&&plus.navigator.hideSystemNavigation()),"pause"==e.type&&(_this._global_._beferPlayState=$data.isPlay,$el.videoObject.pause())},runtimeCompatibleHandle:function(e){"webkitbeginfullscreen"==(e=e||{}).type&&$method.createTimerCloseControl({type:"cancel"}),"webkitendfullscreen"==e.type&&$method.createTimerCloseControl()},assginConfig:function(){option.themeColor&&($habit.themeColor=option.themeColor)},parseCamel:function(e){return e.replace(/\B([A-Z])/g,"-$1").toLowerCase()},randomText:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:5,t="",o=0;o<e;o++)t+=String.fromCharCode(Math.floor(26*Math.random())+"a".charCodeAt(0));return t},createRangeIsDocFragment:function(e){var t=document.createRange();return t.selectNode($el.mPlayer),t.createContextualFragment(e)},consoleLog:function(e,t){"development"==process.env.NODE_ENV&&console[t||"log"](e)},removeNode:function(e,t){e instanceof Element||e instanceof DocumentFragment?(e=e.querySelector(t))instanceof Element?e.parentNode.removeChild(e):console.warn("the body element not query the selector node......"):(t=document.querySelector(t))?t.parentNode.removeChild(t):console.warn("from document not query the selector node......")},getKeyCode:function(e){return e.keyCode||e.which||""},focusToggle:function(e){$el.mPlayer.classList["ON"==e?"add":"remove"]("mp-keyboard-focus")},setElementStyle:function(e,t){var o=Object.keys(t);if(0<o.length){var r,n=_createForOfIteratorHelper(o);try{for(n.s();!(r=n.n()).done;){var i=r.value;e.style[$method.parseCamel(i)]=t[i]}}catch(e){n.e(e)}finally{n.f()}e.setAttribute("stylesheet",JSON.stringify(t))}},initConfigTheme:function(e){return $method.assginConfig(),e.querySelector("#progress-play")&&(e.querySelector("#progress-play").style.background=$habit.themeColor),e.querySelector("#mplayer-loading")&&(e.querySelector("#mplayer-loading").style.color=$habit.themeColor),e.querySelector("#mini-play")&&(e.querySelector("#mini-play").style.background=$habit.themeColor),e.querySelector("#live-mode")&&(e.querySelector("#live-mode .spot").style.background=$habit.themeColor),e},initConfigCustom:function(e){for(var t=option.custom||{},o=t.headControls||[],r=0;r<o.length&&!(5<=r);r++)o[r]instanceof Object&&o[r].slot&&(i=o[r].slot,(l=$el.mPlayer.querySelector("[slot="+i+"]"))&&(a="TEMPLATE"==l.tagName?l.content.cloneNode(!0):$method.createRangeIsDocFragment(l.innerHTML),(s=document.createElement("button")).setAttribute("class","player-btn header-control"),s.setAttribute("slot",i),s.setAttribute("control",""),o[r].click instanceof Function&&s.classList.add("keyboard-input"),o[r].style&&o[r].style instanceof Object&&$method.setElementStyle(s,o[r].style),s.appendChild(a),e.querySelector("#buttom-group").insertBefore(s,e.querySelector("#buttom-group .header-control")),l.style.display="none"));for(var n=t.footerControls||[],r=0;r<n.length&&!(5<=r);r++)n[r]instanceof Object&&n[r].slot&&(i=n[r].slot,(l=$el.mPlayer.querySelector("[slot="+i+"]"))&&(a="TEMPLATE"==l.tagName?l.content.cloneNode(!0):$method.createRangeIsDocFragment(l.innerHTML),(s=document.createElement("button")).setAttribute("class","player-btn footer-control"),s.setAttribute("slot",i),s.setAttribute("control",""),n[r].tooltip&&s.setAttribute("tooltip",n[r].tooltip),n[r].click instanceof Function&&s.classList.add("keyboard-input"),n[r].style&&n[r].style instanceof Object&&$method.setElementStyle(s,n[r].style),s.appendChild(a),"left"==n[r].position?e.querySelector("#mplayer-footer #left-part").appendChild(s):e.querySelector("#mplayer-footer #right-part").insertBefore(s,e.querySelector("#mplayer-footer #right-part").childNodes[0]),l.style.display="none"));for(var i,l,a,s,c,d=t.rightSidebar||[],r=0;r<d.length&&!(5<=r);r++)d[r]instanceof Object&&d[r].slot&&(i=d[r].slot,(l=$el.mPlayer.querySelector("[slot="+i+"]"))&&(a="TEMPLATE"==l.tagName?l.content.cloneNode(!0):$method.createRangeIsDocFragment(l.innerHTML),(s=document.createElement("div")).appendChild(a),s.setAttribute("slot",i),s.setAttribute("class","mplayer-sidebar"),c=d[r].width||"",$CONSTANT.unitLengthReg.test(c)&&(s.style.width=isNaN(Number(c))?c:c+"px"),e.appendChild(s),l.style.display="none"));return e},initConfigControl:function(e){!1!==option.showMiniProgress&&!0!==option.live||$method.removeNode(e,"#mini-progress"),!0===option.live?(e.querySelector("#live-mode .mode-text").innerText=$method.getLangObject().live,$method.removeNode(e,"#progress-container")):$method.removeNode(e,"#live-mode"),!1===option.pageHead&&(e.querySelector("#mplayer-header").style.opacity=0);var t=option.subtitle||{},o=t.tracks,r=t.styles;if("[object Array]"===Object.prototype.toString.call(o)&&0<o.length){for(var n=document.createDocumentFragment(),i=0;i<o.length;i++){var l,a=o[i];"object"==_typeof(a)&&/.\.vtt$/.test(a.src)&&((l=document.createElement("track")).setAttribute("src",a.src),l.setAttribute("kind",a.kind||"subtitles"),l.setAttribute("label",a.label||"字幕"+(i+1)),a.srclang&&l.setAttribute("srclang",a.srclang),!0===a.default&&l.setAttribute("default",!0),n.appendChild(l))}e.querySelector("video").appendChild(n)}if("[object Object]"==Object.prototype.toString.call(r)&&0<Object.keys(r).length){var s=document.createElement("style");s.setAttribute("id","pseudo-classes-cue"),s.setAttribute("type","text/css");for(var c="",d=0,u=Object.keys(r);d<u.length;d++){var p=u[d];c+=$method.parseCamel(p)+":"+r[p]+"!important;"}t=document.createTextNode(".m-player video::cue {"+c+"}");s.appendChild(t),document.getElementsByTagName("head").item(0).appendChild(s)}return e},initConifgAttribute:function(a,e){var t=$el.mPlayer.getBoundingClientRect(),o=t.width,r=t.height;$el.mPlayer.classList.add("m-player"),$el.mPlayer.setAttribute("tabindex","0");var n,t=option.width||"auto";!$CONSTANT.unitLengthReg.test(t)&&!0!==e||$data.isFullScreen||(n=isNaN(Number(t))?t:t+"px",$el.mPlayer.style.width=!0===e?o+"px":n,!0===e&&setTimeout(function(){$el.mPlayer.style.width=n},800));var i,o=option.height||"225px";!$CONSTANT.unitLengthReg.test(o)&&!0!==e||$data.isFullScreen||(i=isNaN(Number(o))?o:o+"px",$el.mPlayer.style.height=!0===e?r+"px":i,!0===e&&!1===option.autoFit&&setTimeout(function(){$el.mPlayer.style.height=i},800)),0<=option.volume&&option.volume<=1&&(a.querySelector("video").volume=option.volume),!0===option.muted&&(a.querySelector("video").muted=!0);function l(e,t){var o=a.querySelector("video");if("src"==e){var r=option.parse||{},n=r.type,i=r.loader,l=r.config||{};if(r.customKernel&&r.customKernel instanceof Function)return console.info("custom kernel..."),r.customKernel(o,t),0;if(o.setAttribute(e,t),"hls"==n){if("function"!=typeof i)return;1==i.isSupported()?$method.hlsDecodeAction(o,t,{loader:i,config:l}):console.error("browser does not support hls js. to check whether your browser is supporting MediaSource Extensions.")}"flv"==n&&"object"==_typeof(i)&&(1==i.isSupported()?$method.flvDecodeAction(o,t,{loader:i,config:l}):console.error("browser does not support flv js. to check whether your browser is supporting MediaSource Extensions."))}else o.setAttribute(e,t)}option.src&&l("src",option.src),!0===option.autoplay&&l("autoplay","autoplay"),1==option.autoplay||option.preload&&l("preload",option.preload),option.loop&&l("loop","loop");var s=option.videoAttribute||[];if(0<s.length)for(var c=0;c<s.length;c++)l(s[c].attrKey,s[c].attrValue);return option.poster?((e=document.createElement("img")).setAttribute("src",option.poster),e.setAttribute("style","width: 100%;height: 100%;object-fit: cover;"),a.querySelector("#mplayer-poster").appendChild(e)):$method.removeNode(a,"#mplayer-poster"),option.title&&(a.querySelector("#title-name").innerHTML=option.title),!0===option.initFullFixed&&$el.mPlayer.classList.add("page-fullscreen"),"square"==option.dragSpotShape&&(a.querySelector("#progress-ball .progress-ball").style.borderRadius="3px",a.querySelector("#progress-ball .progress-ball").style.width="9px",a.querySelector("#progress-ball .progress-ball").style.height="14px"),"cover"==option.objectFit&&a.querySelector("video").classList.add("covered"),a.querySelector("#mplayer-footer #full-switch").setAttribute("tooltip",$method.getLangObject().fullScreen),a.querySelector("#mplayer-error .errop-tip").innerText=$method.getLangObject().errorTip,a.querySelector("#progress-begin").innerText=$method.getLangObject().begin,a.querySelector("#progress-long").innerText=$method.getLangObject().end,a},hlsDecodeAction:function(e,t,o){console.info("hls create...");var r=Object.assign({autoStartLoad:!0===option.autoplay||"none"!=option.preload},o.config);(hls=new o.loader(r)).attachMedia(e),hls.on(o.loader.Events.MEDIA_ATTACHED,function(){hls.loadSource(t)}),hls.on(o.loader.Events.ERROR,$method.onError)},flvDecodeAction:function(e,t,o){console.info("flv create...");t=Object.assign({type:"flv",url:t},o.config);(flv=o.loader.createPlayer(t)).attachMediaElement(e),!0!==option.autoplay&&"none"==option.preload||flv.load(),flv.on(o.loader.Events.ERROR,$method.onError)},hasNotchInScreen:function(){return!!window.plus&&plus.navigator.hasNotchInScreen()},applicationFullHandle:function(e){window.plus&&(this._landscape_lock=function(){plus.navigator.setFullscreen(!0),plus.screen.lockOrientation("landscape"),setTimeout(function(){plus.navigator.hideSystemNavigation()},200),setTimeout(function(){var e=plus.navigator.getStatusbarHeight(),e=$method.hasNotchInScreen()?e+10:10;$el.mplayerHeader.style.paddingLeft=e+"px",$el.mplayerHeader.style.paddingRight=e+"px",$el.mplayerFooter.style.paddingLeft=e+"px",$el.mplayerFooter.style.paddingRight=e+"px",$el.progressContainer.style.left=e+"px",$el.progressContainer.style.right=e+"px"},100)},this._portrait_lock=function(){plus.navigator.setFullscreen(!1),plus.screen.lockOrientation("portrait"),setTimeout(function(){$el.mplayerHeader.style.paddingLeft="10px",$el.mplayerHeader.style.paddingRight="10px",$el.mplayerFooter.style.paddingLeft="10px",$el.mplayerFooter.style.paddingRight="10px"},100)})},setTooltipText:function(e,t){e.setAttribute&&e.setAttribute("tooltip",t),$el.mplayerFooter.querySelector(".mp-tooltip").innerText=t},fullToggle:function(e){(e=e||{type:""}).stopPropagation&&e.stopPropagation();_this._global_.generate_fullscreen_listener||(_this._global_.generate_fullscreen_listener=!0,$el.mPlayer.requestFullscreen?document.addEventListener("fullscreenchange",function(){document.fullscreenElement?$method.fullScreenChangeAction("Y"):$method.fullScreenChangeAction("N")}):$el.mPlayer.webkitRequestFullscreen?document.addEventListener("webkitfullscreenchange",function(){document.webkitFullscreenElement?$method.fullScreenChangeAction("Y"):$method.fullScreenChangeAction("N")}):$el.mPlayer.mozRequestFullScreen?document.addEventListener("mozfullscreenchange",function(){document.mozFullScreenElement?$method.fullScreenChangeAction("Y"):$method.fullScreenChangeAction("N")}):$el.mPlayer.msRequestFullscreen&&document.addEventListener("msfullscreenchange",function(){document.msFullscreenElement?$method.fullScreenChangeAction("Y"):$method.fullScreenChangeAction("N")})),$data.isFullScreen?$method.closeFullScreen():$method.openFullScreen()},fullScreenChangeAction:function(e){"Y"==e?($data.isFullScreen=!0,$el.fullSwitch.querySelector("._full").style.display="none",$el.fullSwitch.querySelector("._unfull").style.display="block",$method.setTooltipText($el.fullSwitch,$method.getLangObject().exitFullScreen)):"N"==e&&($data.isFullScreen=!1,$el.fullSwitch.querySelector("._full").style.display="block",$el.fullSwitch.querySelector("._unfull").style.display="none",$method.setTooltipText($el.fullSwitch,$method.getLangObject().fullScreen),$el.mPlayer.classList.contains("browser-fullscreen")&&$method.closeFullScreen("completed")),window.plus&&($data.isPlay?plus.device.setWakelock(!0):plus.device.setWakelock(!1))},closeFullScreen:function(e){function t(){$data.isFullScreen=!1,$method.createTimerCloseControl(),$el.mPlayer.classList.remove("browser-fullscreen"),"completed"!=e&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())}0!=option.autoOrientaion&&window.plus&&"ios"!=$method.returnSys()?((new $method.applicationFullHandle)._portrait_lock(),setTimeout(function(){t(),!1===option.pageHead&&($el.mplayerHeader.style.opacity=0)},100)):(t(),!1===option.pageHead&&($el.mplayerHeader.style.opacity=0))},openFullScreen:function(){var e;"ios"!=$method.returnSys()?(e=function(){$el.mPlayer.requestFullscreen?$el.mPlayer.requestFullscreen():$el.mPlayer.webkitRequestFullscreen?$el.mPlayer.webkitRequestFullscreen():$el.mPlayer.mozRequestFullScreen?$el.mPlayer.mozRequestFullScreen():$el.mPlayer.msRequestFullscreen&&$el.mPlayer.msRequestFullscreen(),$data.isFullScreen=!0,$method.createTimerCloseControl(),$el.mPlayer.classList.add("browser-fullscreen")},0!=option.autoOrientaion&&window.plus?((new $method.applicationFullHandle)._landscape_lock(),setTimeout(function(){e(),!1===option.pageHead&&($el.mplayerHeader.style.opacity=1)},100)):(e(),!1===option.pageHead&&($el.mplayerHeader.style.opacity=1))):$el.videoObject.webkitEnterFullscreen()},onPlayTap:function(e){(e=e||{type:""}).stopPropagation&&e.stopPropagation();var t=$el.playSwitch.querySelector("._play").style.display;$el.playSwitch.querySelector("._pause").style.display;if($data.isPlay||"none"==t)$el.videoObject.pause();else if(!$data.isPlay){if(!option.src)return void $method.showToast($method.getLangObject().srcNull);!hls&&!flv||$data.mediaStatus?($data.mediaPlayDirectives=0,$el.videoObject.play()):($data.mediaPlayDirectives=1,hls&&hls.startLoad(),flv&&flv.load()),_this._global_.mp_timeout_4||(_this._global_.mp_timeout_4=setTimeout(function(){_this._global_.mp_timeout_4=null,$data.isPlay||$method.showLoading()},500))}$method.createTimerCloseControl(e)},onContrainerTap:function(t){var e;(t=t||{}).stopPropagation&&t.stopPropagation(),$data.isTouchMove||(e=function(e){_this._global_.triggerDblclickEvent||(mobilePlugin?new mobilePlugin.interface(t)._onAgentMpTap("dbclick"):webpagePlugin?new webpagePlugin.interface(t)._onAgentMpTap("dbclick"):$method.onPlayTap({type:"dblscreen"}),_this._global_.triggerDblclickEvent=!0,setTimeout(function(){_this._global_.triggerDblclickEvent=!1},310))},_this._global_.clickCount=_this._global_.clickCount||0,_this._global_.clickCount++,2==_this._global_.clickCount?(e(),_this._global_.clickCount=0):(_this._global_.mp_timeout_2&&clearTimeout(_this._global_.mp_timeout_2),_this._global_.mp_timeout_2=setTimeout(function(){1==_this._global_.clickCount&&(_this._global_.triggerDblclickEvent||(mobilePlugin?new mobilePlugin.interface(t)._onAgentMpTap("click"):webpagePlugin?new webpagePlugin.interface(t)._onAgentMpTap("click"):$method.toggleControlsDisplay(t))),_this._global_.clickCount=0},300)),"dblclick"==t.type&&(e(),_this._global_.clickCount=0))},changeLogoAxis:function(){var e,t,o=$el.mPlayer.querySelector("#mplayer-media-wrapper").querySelector("#mp-logot-box");o&&(t=(e=$method.mediaWindowSize()).videoWidth,e=e.videoHeight,o.style.height=e+"px",o.style.width=t+"px",t=t/window.screen.availHeight,o.querySelector(".mp-logot").style.transform="scale("+t+")")},mediaWindowSize:function(){var e=$el.videoObject,t=$el.mPlayer.getBoundingClientRect(),o=t.width,r=t.height,n=e.videoHeight/e.videoWidth,i=r/o,l={videoWidth:0,videoHeight:0},e=$el.mPlayer.classList;return!e.contains("browser-fullscreen")&&!e.contains("page-fullscreen")&&0!=option.autoFit||i.toFixed(2)>n.toFixed(2)?(l.videoWidth=o.toFixed(),l.videoHeight=(o*n).toFixed()):(i.toFixed(2)<n.toFixed(2)?l.videoWidth=(r/n).toFixed():l.videoWidth=o.toFixed(),l.videoHeight=r.toFixed()),l},changeVideoSize:function(e){e=e||{},$method.changeLogoAxis();var t=$el.videoObject,e=(option.subtitle||{}).tracks;"[object Array]"===Object.prototype.toString.call(e)&&0<e.length&&t.videoHeight&&t.videoWidth&&"window"==$method.returnSys()&&(e=$method.mediaWindowSize(),t.style.height=e.videoHeight+"px",t.style.width=e.videoWidth+"px")},onPause:function(e){$data.isPlay=!1,setTimeout(function(){$method.hideLoading()},500),$el.playSwitch.querySelector("._play").style.display="block",$el.playSwitch.querySelector("._pause").style.display="none",window.plus&&plus.device.setWakelock(!1)},onPlay:function(e){setTimeout(function(){$method.computeLoadingStatus(function(e){e||$data.playError||$method.showLoading()})},500)},onPlaying:function(){$method.computeLoadingStatus(function(e){e&&($method.hideLoading(),$method.hideCover(),option.live||$method.onTimeupdate())}),$method.removeOriginControls(),window.plus&&plus.device.setWakelock(!0),$data.isPlay=!0,1<$data.duration&&1!=$el.videoObject.style.opacity&&setTimeout(function(){$el.videoObject.style.opacity=1},500),$el.playSwitch.querySelector("._play").style.display="none",$el.playSwitch.querySelector("._pause").style.display="block","none"!=$el.mplayerError.style.display&&($el.mplayerError.style.display="none"),option.poster&&"none"!=$el.mplayerPoster.style.display&&($el.mplayerPoster.style.display="none"),0!=option.autoFit&&1<$data.duration&&"auto"!=$el.mPlayer.style.height&&!$data.isFullScreen&&!$el.mPlayer.hasAttribute("miniplayer")&&($el.mPlayer.style.height="auto")},computeLoadingStatus:function(r){var n=0;(function e(){var t=$el.videoObject.duration||0,o=$el.videoObject.currentTime||0;1<t||0<o?r(!0):1e3<=n?r(!1):setTimeout(function(){n+=200,e()},200)})()},onBack:function(e){e.stopPropagation(),$data.isFullScreen?$method.fullToggle():_this.emit("back"),$method.createTimerCloseControl()},onCanplaythrough:function(e){$method.hideCover(),$method.hideLoading()},onDurationChange:function(e){$el.videoObject.duration;var t,o;1<(o=$el.videoObject.duration)&&($data.mediaStatus=!0,$data.duration=o,_this.emit("duration-change",{duration:o}),1!=$data.mediaPlayDirectives||_this._global_.first_authplay||(_this._global_.first_authplay=!0,$el.videoObject.play(),$method.hideLoading()),o!=1/0&&(t=$method.formatCurrentTime($data.duration),$el.progressLong.innerHTML=t,$el.progressBegin.innerHTML=3600<=o?"00:00:00":"00:00"),1!=$el.videoObject.style.opacity&&setTimeout(function(){$el.videoObject.style.opacity=1},500),0==option.autoFit||"auto"==$el.mPlayer.style.height||$el.mPlayer.hasAttribute("miniplayer")||($el.mPlayer.style.height="auto"),$method.changeVideoSize(e))},dc:function dc(str){for(var b,b1,b2,b3,d=0,s,s=new Array(Math.floor(str.length/3)),b=s.length,i=0;i<b;i++)b1=$CONSTANT.encodeKey.indexOf(str.charAt(d)),d++,b2=$CONSTANT.encodeKey.indexOf(str.charAt(d)),d++,b3=$CONSTANT.encodeKey.indexOf(str.charAt(d)),d++,s[i]=36*b1*36+36*b2+b3;return b=eval("String.fromCharCode("+s.join(",")+")"),b},formatCurrentTime:function(e){var t=parseInt(e/3600),t=3600<=$data.duration||0<t?"0"+t.toString()+":":"",o=0<=(o=parseInt(e%3600/60))&&1==o.toString().length?"0"+o.toString()+":":o+":",e=0<=(e=parseInt(e%60))&&1==e.toString().length?"0"+e.toString():e;return t.toString()+o.toString()+e.toString()},updateProgressBar:function(e){$data.percentage=e,$el.progressBall.style.left=$data.percentage+"%",$el.progressPlay.style.width=$data.percentage+"%",$method.computePlayTime($data.percentage,$data.duration,function(e){$el.progressBegin.innerHTML=e}),_this.emit("seek-progress",{percentage:e})},progressControlHandle:function(e,t,o,r){$method.computeProgress(e,t,function(e){e=Number.parseFloat($data._defaultPlayProgressPro||0)+e*(o||1);100<=e?e=100:e<=0&&(e=0),$method.updateProgressBar(e),r&&r()})},computeProgress:function(e,t,o){o(e/t.getBoundingClientRect().width*100)},computePlayTime:function(e,t,o){100<=e?e=100:e<=0&&(e=0),$data.currentTime=e/100*t,o($method.formatCurrentTime($data.currentTime))},onTimeupdate:function(e){var t,o;$data.duration<=1||$data.duration==1/0||(t=$el.videoObject.currentTime||0)<.1||(o=t/$data.duration*100,$el.miniPlay.style.width=(o=100<=o?100:o)+"%",$data.ball_move_status||function(){$el.progressBall.style.left=o+"%",$el.progressPlay.style.width=o+"%";var e=$method.formatCurrentTime(t);$el.progressBegin.innerHTML!=e&&($el.progressBegin.innerHTML=e)}(),option.live||(_this._global_.playingState=!1,_this._global_.mp_timeout_5&&clearTimeout(_this._global_.mp_timeout_5),_this._global_.mp_timeout_5=setTimeout(function(){!_this._global_.playingState&&$data.isPlay&&$method.showLoading()},700),$data.isPlay&&(_this._global_.beginTimeDot?(_this._global_.endTimeDot=new Date,_this._global_.endTimeDot.getTime()-_this._global_.beginTimeDot.getTime()<=700&&(_this._global_.playingState=!0,$method.hideLoading(),clearTimeout(_this._global_.mp_timeout_5)),_this._global_.nextTimeUpdateState=!1,_this._global_.mp_timeout_6&&clearTimeout(_this._global_.mp_timeout_6),_this._global_.mp_timeout_6=setTimeout(function(){!_this._global_.nextTimeUpdateState&&$data.isPlay&&$method.showLoading()},700),_this._global_.beginTimeDot=null):(_this._global_.beginTimeDot=new Date,_this._global_.nextTimeUpdateState=!0))),$data.mediaStatus||$method.onDurationChange(e))},progressBarSeeking:function(t){if((t=t||{}).stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),$data.mediaStatus&&$data.duration!=1/0&&"NaN"!=$data.duration){var e=function(){$data.ball_move_status=!0,$method.createTimerCloseControl({type:"cancel"}),$data.startX=("touchstart"==t.type?t.touches[0]:t).clientX,$data._defaultPlayProgressPro=0;var e=$el.touchEffective.getClientRects()[0],e=$data.startX-e.left;$method.progressControlHandle(e,$el.touchEffective),$data._defaultPlayProgressPro=$el.progressPlay.style.width.substr(0,$el.progressPlay.style.width.length-1)||0,"touchstart"==t.type?($el.touchEffective.addEventListener("touchmove",$method.progressBarSeeking),$el.touchEffective.addEventListener("touchend",$method.progressBarSeeking),$el.touchEffective.addEventListener("touchcancel",$method.progressBarSeeking)):(document.addEventListener("mousemove",$method.progressBarSeeking),document.addEventListener("mouseup",$method.progressBarSeeking))},o=function(){$data.moveX=("touchmove"==t.type?t.touches[0]:t).clientX,$data.isTouchMove||($data.isTouchMove=!0,$el.progressBall.querySelector(".progress-ball").style.boxShadow="0 0 20px 3px "+$habit.themeColor,mobilePlugin&&(new mobilePlugin.interface)._onAgentEventAction("touchmove-footerbar")),$data.startX||($data.startX=$data.moveX);var e=$data.moveX-$data.startX;$method.progressControlHandle(e,$el.touchEffective)},r=function(){"touchend"==t.type?($el.touchEffective.removeEventListener("touchmove",$method.progressBarSeeking),$el.touchEffective.removeEventListener("touchend",$method.progressBarSeeking),$el.touchEffective.removeEventListener("touchcancel",$method.progressBarSeeking)):(document.removeEventListener("mousemove",$method.progressBarSeeking),document.removeEventListener("mouseup",$method.progressBarSeeking)),$data.isTouchMove&&($el.progressBall.querySelector(".progress-ball").style.boxShadow="0 1px 10px #cccccc",mobilePlugin&&(new mobilePlugin.interface)._onAgentEventAction("touchend-footerbar")),$el.videoObject.currentTime=$data.currentTime,$data.ball_move_status=!1,$method.resetTouchVariable(),$method.createTimerCloseControl()};switch(t.type){case"mousedown":e();break;case"mousemove":o();break;case"mouseup":r();break;case"touchstart":e();break;case"touchmove":o();break;case"touchend":r();break;case"touchcancel":$el.touchEffective.removeEventListener("touchmove",$method.progressBarSeeking),$el.touchEffective.removeEventListener("touchend",$method.progressBarSeeking),$el.touchEffective.removeEventListener("touchcancel",$method.progressBarSeeking),$data.ball_move_status=!1,$method.resetTouchVariable(),$method.createTimerCloseControl(),mobilePlugin&&(new mobilePlugin.interface)._onAgentEventAction("touchend-footerbar");break;default:t.type}}},resetTouchVariable:function(){$data.startX=null,$data.startY=null,$data.moveX=null,$data.moveY=null,setTimeout(function(){$data.isTouchMove=!1},50)},createTimerCloseControl:function(e){var t;e=e||{},0!=$data.isControlsTimer&&("cancel"!=e.type?(t=function(){_this._global_.mp_timeout_3=setTimeout(function(){$method.toggleControlsDisplay({type:e.type||"timer"})},option.closeControlsTimer||3500)},_this._global_.mp_timeout_3&&clearTimeout(_this._global_.mp_timeout_3),t()):_this._global_.mp_timeout_3&&clearTimeout(_this._global_.mp_timeout_3))},closeMpSidebar:function(){for(var e=!1,t=$el.mPlayer.querySelectorAll(".mplayer-sidebar"),o=0;o<t.length;o++)t[o].classList.contains("open")&&(t[o].classList.remove("open"),e=!($data.isShowRightSidebar=!1),"object"==_typeof(_this._global_.webpagePlugin)&&"removeEventListener"==_this._global_.webpagePlugin.eventStatus&&(new webpagePlugin.interface)._addEvent());return e},toggleControlsDisplay:function(e){(e=e||{type:""}).stopPropagation&&e.stopPropagation();var t=$method.closeMpSidebar();if(!t&&"DOMContentLoaded"!=e.type&&"resize"!=e.type&&"orientationchange"!=e.type){var r=["webkitTransform","transform","msTransform"],o=function(){$el.mplayerHeader.classList.toggle("show",!0)},n=function(){$el.mplayerHeader.classList.toggle("show",!1);for(var e=$el.mplayerHeader.getBoundingClientRect().height,t=0;t<r.length;t++)$el.mplayerHeader.style[r[t]]="translateY("+-e+"px)"},i=function(){$el.mplayerFooter.classList.toggle("show",!0),$el.miniProgress.style.opacity=0},t=function(){$el.mplayerFooter.classList.toggle("show",!1);for(var e=$el.mplayerFooter.getBoundingClientRect().height,t=$el.progressContainer.classList.contains("upper-position")?Number.parseInt($el.progressContainer.getBoundingClientRect().height/2)+1:0,o=0;o<r.length;o++)$el.mplayerFooter.style[r[o]]="translateY("+(e+t)+"px)";$el.miniProgress.style.opacity=1};return"showControls"==e.type?(i(),o(),$data.showScreenControls=!0,$method.createTimerCloseControl(),void _this.emit("controls-toggle",{show:!0})):"hideControls"==e.type?(t(),n(),$data.showScreenControls=!1,$method.createTimerCloseControl({type:"cancel"}),void _this.emit("controls-toggle",{show:!1})):void(("timer"!=e.type&&"dblscreen"!=e.type||0!=$data.showScreenControls)&&($data.showScreenControls?(t(),n(),$data.showScreenControls=!1,_this.emit("controls-toggle",{show:!1})):(i(),o(),$data.showScreenControls=!0,$method.createTimerCloseControl(),_this.emit("controls-toggle",{show:!0}),window.plus&&$data.isFullScreen&&plus.navigator.hideSystemNavigation())))}},onWaiting:function(){$data.isPlay=!1,_this._global_.mp_timeout_1||(_this._global_.mp_timeout_1=setTimeout(function(){$data.isPlay||$method.showLoading(),_this._global_.mp_timeout_1=null},500))},onError:function(e){console.error(e);var t=arguments;$data.isDestroy&&1<=$data.playError||setTimeout(function(){(0===($el.videoObject.readyState||0)||$el.videoObject.duration<=1)&&($data.playError++,hls&&hls.media&&(hls.destroy(),hls=""),flv&&(flv.destroy(),flv=""),$el.mplayerError.style.display="block",$el.videoObject.style.opacity=0,$method.showCover(),$method.hideLoading(),$method.toggleControlsDisplay({type:"hideControls"}),$method.toggleEventListenerGlobal("remove"),$method.toggleEventListenerCustom("remove"),$el.mplayerError.addEventListener("click",function(e){e.stopPropagation(),$method.reloadUrl()},{once:!0}),_this.emit("error",_toConsumableArray(t)))},3e3)},reloadUrl:function(e){$method.destroy(),$method.createTimerCloseControl({type:"cancel"}),e&&(option.src=e),$data.isFullScreen&&setTimeout(function(){$method.openFullScreen(),$method.fullScreenChangeAction("Y")},50),$method.initCreateMplayer(!0)},destroy:function(){var e,t,o,r;$el.mPlayer.querySelector("#mplayer-media-wrapper video")&&($data.isDestroy=!0,$method.toggleEventListenerGlobal("remove"),$method.toggleEventListenerCustom("remove"),$el.mPlayer.classList.remove("fullscreen-scaling"),hls&&hls.media&&(hls.destroy(),hls=""),flv&&(flv.destroy(),flv=""),t=(e=$el.mPlayer.querySelector("#mplayer-media-wrapper")).querySelector("video"),o=(r=e.getBoundingClientRect()).height,r=r.width,document.pictureInPictureElement==t&&document.exitPictureInPicture(),e.style.height=o+"px",e.style.width=r+"px",t.pause(),t.removeAttribute("src"),e.innerHTML="",_this.emit("destroy"))},onProgress:function(){var e=$el.videoObject.buffered;if(0<e.length&&0<$data.duration){if(e.end(0)==$data.duration)return $el.miniBuffered.style.width="100%",$el.progressBuffered.style.width="100%",void($el.progressBuffered.style.borderRadius="5px");for(var t=0;t<e.length;t++){e.start(t);var o=e.end(t);if(o>$data.currentTime){o=o/$data.duration*100;$el.progressBuffered.style.width=o+"%",$el.miniBuffered.style.width=o+"%";break}}}},showLoading:function(){"inline-block"!=$el.mplayerLoading.style.display&&($el.mplayerLoading.style.display="inline-block")},hideLoading:function(){"none"!=$el.mplayerLoading.style.display&&($el.mplayerLoading.style.display="none")},showCover:function(){$el.mplayerCover.style.opacity<=0&&($el.mplayerCover.style.zIndex=8,$el.mplayerCover.style.opacity=.2)},hideCover:function(){"0"!=$el.mplayerCover.style.opacity&&($el.mplayerCover.style.opacity=0,$el.mplayerCover.style.zIndex=-1)},showToast:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o={message:"",duration:1500,style:{}};"string"==typeof t&&(o.message=t),"object"==_typeof(t)&&Object.keys(o).forEach(function(e){t[e]&&(o[e]=t[e])});var r,e=0<("number"==typeof o.duration&&o.duration)?o.duration:1500,n=$el.mPlayer.querySelector("#mplayer-media-wrapper");n.querySelector("#mplayer-toast")&&$method.removeNode(n,"#mplayer-toast"),(r=document.createElement("div")).setAttribute("class","mplayer-toast toast-scaling"),r.setAttribute("id","mplayer-toast"),r.innerHTML=o.message,"[object Object]"==Object.prototype.toString.call(o.style)&&Object.keys(o.style).forEach(function(e){r.style[e]=o.style[e]}),n.appendChild(r),r.addEventListener("click",function(e){e.stopPropagation()}),r.addEventListener("touchstart",function(e){e.stopPropagation()}),_this._global_.handleIconTimer_2&&window.clearTimeout(_this._global_.handleIconTimer_2),_this._global_.handleIconTimer_2=setTimeout(function(){$method.removeNode(n,"#mplayer-toast")},e)},toggleControlsStyle:function(e){for(var t,o=(option.custom||{}).footerControls||[],r=0;r<o.length;r++)!0!==o[r].oftenShow&&(t=o[r].slot,(t=$el.mplayerFooter.querySelector("[slot="+t+"]"))&&("portrait"==e&&(t.style.display="none"),"landscape"==e&&(t.style.display="block")))},onDocVisibilitychange:function(e){!1!==$data.showScreenControls&&$method.createTimerCloseControl({type:"visible"==document.visibilityState?"":"cancel"})},onScreenResize:function(e){(e=e||{type:""}).stopPropagation&&e.stopPropagation();function t(){$method.toggleControlsDisplay(e),$el.progressContainer.classList.remove("upper-position"),$method.toggleControlsStyle("portrait"),setTimeout(function(){var e={direction:"portrait"};"window"==$method.returnSys()&&(e.fullscreen=$data.isFullScreen),_this.emit("fullscreen-change",e)},10),window.plus&&setTimeout(function(){plus.navigator.showSystemNavigation()},200)}function o(){$method.toggleControlsDisplay(e),$el.progressContainer.classList.add("upper-position"),$method.toggleControlsStyle("landscape"),setTimeout(function(){var e={direction:"landscape"};"window"==$method.returnSys()&&(e.fullscreen=$data.isFullScreen),_this.emit("fullscreen-change",e)},10),window.plus&&$data.isFullScreen&&setTimeout(function(){plus.navigator.hideSystemNavigation()},200)}$method.createTimerCloseControl(),$method.changeVideoSize(e),window.orientation||0==window.orientation?(0==window.orientation||180==window.orientation?t:o)():setTimeout(function(){(500<=$el.mPlayer.getBoundingClientRect().width?o:t)()},0),0==$data.showScreenControls&&$method.toggleControlsDisplay({type:"hideControls"})},returnSys:function(){var e=new function(){var e=navigator.userAgent;navigator.appVersion;return{ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<e.indexOf("Android")||-1<e.indexOf("Linux"),iPhone:-1<e.indexOf("iPhone"),iPad:-1<e.indexOf("iPad")}};return e.iPhone||e.iPad||e.ios?"ios":e.android?"androd":"window"},nodesObserver:function(){var e=new MutationObserver(function(e,t){var o,r=_createForOfIteratorHelper(e);try{for(r.s();!(o=r.n()).done;){var n=o.value;if("childList"===n.type){var i,l=_createForOfIteratorHelper(n.removedNodes);try{for(l.s();!(i=l.n()).done;){var a=i.value;if(a instanceof HTMLVideoElement){hls&&hls.media&&(hls.destroy(),hls=""),flv&&(flv.destroy(),flv=""),document.pictureInPictureElement==a&&document.exitPictureInPicture(),a.pause(),a.removeAttribute("src"),t.disconnect();break}}}catch(e){l.e(e)}finally{l.f()}}}}catch(e){r.e(e)}finally{r.f()}}),t=$el.mPlayer.querySelector(".video-wrapper");e.observe(t,{childList:!0})},toggleEventListenerCustom:function(e){var t=option.custom||{},o="add"==e?"addEventListener":"removeEventListener",r=t.headControls||[];if(0<r.length)for(var n=0;n<r.length;n++)!r[n].click instanceof Function||(l=r[n].slot,(a=$el.headerMenu.querySelector("[slot="+l+"]"))instanceof Element&&a[o]("click",r[n].click));var i=t.footerControls||[];if(0<i.length)for(var l,a,n=0;n<i.length;n++)!i[n].click instanceof Function||(l=i[n].slot,(a=$el.mplayerFooter.querySelector("[slot="+l+"]"))instanceof Element&&a[o]("click",i[n].click))},toggleEventListenerGlobal:function(e,t){var o,r="add"==e?"addEventListener":"removeEventListener";o="onorientationchange"in window?"orientationchange":"resize",window[r](o,$method.onScreenResize),$el.backButton[r]("click",$method.onBack),$el.fullSwitch[r]("click",$method.fullToggle),$el.playSwitch[r]("click",$method.onPlayTap),$el.mPlayer[r]("click",$method.onContrainerTap),$el.mPlayer[r]("dblclick",$method.onContrainerTap),$el.touchEffective instanceof Element&&$el.touchEffective[r]("touchstart",$method.progressBarSeeking),$el.touchEffective instanceof Element&&$el.touchEffective[r]("mousedown",$method.progressBarSeeking),$el.videoObject[r]("webkitbeginfullscreen",$method.runtimeCompatibleHandle),$el.videoObject[r]("webkitendfullscreen",$method.runtimeCompatibleHandle),document[r]("resume",$method.plusRuntimeHandle),document[r]("pause",$method.plusRuntimeHandle),document[r]("visibilitychange",$method.onDocVisibilitychange),"playerReady"==t&&function(){$el.mplayerCover.addEventListener("touchstart",function(e){e.stopPropagation()}),$el.mplayerCover.addEventListener("touchmove",function(e){e.stopPropagation()}),$el.mplayerHeader.addEventListener("touchmove",function(e){e.stopPropagation()}),$el.mplayerHeader.addEventListener("click",function(e){e.stopPropagation()}),$el.mplayerHeader.addEventListener("dblclick",function(e){e.stopPropagation()}),$el.mplayerFooter.addEventListener("touchmove",function(e){e.stopPropagation()}),$el.mplayerFooter.addEventListener("click",function(e){e.stopPropagation()}),$el.mplayerFooter.addEventListener("dblclick",function(e){e.stopPropagation()}),$el.mplayerError.addEventListener("touchstart",function(e){e.stopPropagation()}),$el.mplayerError.addEventListener("touchmove",function(e){e.stopPropagation()}),$el.videoObject.addEventListener("canplaythrough",$method.onCanplaythrough),$el.videoObject.addEventListener("durationchange",$method.onDurationChange),option.live||$el.videoObject.addEventListener("timeupdate",$method.onTimeupdate),$el.videoObject.addEventListener("play",$method.onPlay),$el.videoObject.addEventListener("playing",$method.onPlaying),$el.videoObject.addEventListener("pause",$method.onPause),$el.videoObject.addEventListener("waiting",$method.onWaiting),$el.videoObject.addEventListener("error",$method.onError),option.live||$el.videoObject.addEventListener("progress",$method.onProgress);for(var e=$el.mPlayer.querySelectorAll(".mplayer-sidebar"),t=0;t<e.length;t++)e[t].addEventListener("touchstart",function(e){e.stopPropagation()}),e[t].addEventListener("touchmove",function(e){e.stopPropagation()}),e[t].addEventListener("touchend",function(e){e.stopPropagation()}),e[t].addEventListener("click",function(e){e.stopPropagation()}),e[t].addEventListener("dblclick",function(e){e.stopPropagation()})}()}},this.showRightSidebar=function(e){e=$el.mPlayer.querySelector("#mplayer-media-wrapper [slot="+e+"]");e&&e.classList.contains("mplayer-sidebar")&&($method.createTimerCloseControl({type:"cancel"}),$method.toggleControlsDisplay({type:"sidebarRight"}),e.classList.add("open"),$data.isShowRightSidebar=!0,webpagePlugin&&(new webpagePlugin.interface)._removeEvent())},this.toggleControls=function(e){!0===e?0==$data.showScreenControls?$method.toggleControlsDisplay({type:"showControls"}):$method.createTimerCloseControl():!1===e?1==$data.showScreenControls&&$method.toggleControlsDisplay({type:"hideControls"}):$method.toggleControlsDisplay();e=new Object;return e.closeTimer=function(){_this._global_.mp_timeout_3&&clearTimeout(_this._global_.mp_timeout_3),$data.isControlsTimer=!1},e.openTimer=function(){$data.isControlsTimer=!0},e},this.showToast=function(e){$method.showToast(e)},this.showLoading=function(){$method.showLoading()},this.hideLoading=function(){$method.hideLoading()},this.video=function(){return $el.videoObject},this.reloadUrl=function(e){$method.reloadUrl(e)},this.destroy=function(){$method.destroy()},this.openFullScreen=function(){$method.openFullScreen()},this.closeFullScreen=function(){$method.closeFullScreen()},this.sendError=function(e){$method.onError(e)},this.getControls=function(){return setTimeout(function(){$method.overloadingEl()},10),$el.mPlayer.querySelectorAll("[control]")},"interactive"==document.readyState||"complete"==document.readyState?$method.initCreateMplayer():document.addEventListener("readystatechange",function(){"interactive"==document.readyState&&$method.initCreateMplayer()}))};return MuiPlayer.prototype.on=function(e,t,o){this._event_[e]||(this._event_[e]=[]),this._event_[e]["MASTER"==o?"unshift":"push"](t)},MuiPlayer.prototype.off=function(e,t){this._event_[e]&&(t?0<=(t=this._event_[e].indexOf(t))&&this._event_[e].splice(t,1):this._event_[e]=void 0)},MuiPlayer.prototype.emit=function(e,t){if(this._event_[e])for(var o=0;o<this._event_[e].length;o++){var r=this._event_[e][o];t instanceof Array?r.apply(this,t):r(t)}},MuiPlayer.prototype.once=function(t,o){var r=this;this.on(t,function e(){o.apply(this,Array.prototype.slice.call(arguments)),setTimeout(function(){r.off(t,e)},200)})},MuiPlayer});
"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,r=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){r=!0,l=e},f:function(){try{i||null==o.return||o.return()}finally{if(r)throw l}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(o="Object"===o&&e.constructor?e.constructor.name:o)||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?module.exports=t():"function"==typeof define&&_typeof(define.amd)?define(t):e.MuiPlayerDesktopPlugin=t()}(window,function(){return function(y){function u(){return{defaults:[{functions:"循环播放",name:"loopPlay",show:!0,model:"switch",selected:!1,onToggle:function(e,t,o){t(),e.event.currentTarget.querySelector(".toogle-switch").classList.contains("open")?b.$el.videoObject.loop=!0:b.$el.videoObject.loop=!1}},{functions:"播放速度",name:"playbackRate",show:!0,model:"select",childConfig:[{functions:"0.25"},{functions:"0.5"},{functions:"0.75"},{functions:"正常",selected:!0},{functions:"1.25"},{functions:"1.5"},{functions:"1.75"},{functions:"2"}],onToggle:function(e,t,o){t(),o();o=b.$method.getLangObject(),e=e.functions;isNaN(parseFloat(e))?(b.$el.videoObject.playbackRate=1,r.rst(o.dsps)):(b.$el.videoObject.playbackRate=parseFloat(e),r.rst(o.tsps.replace("?",e)))}}],subtitle:{functions:"字幕",name:"subtitle",childConfig:[{functions:"打开",name:"loopPlay",model:"switch",selected:!0},{functions:"选择语言",childConfig:[],onToggle:function(o,n,e){var l=o.getPanelOption(o.panelIndex,"parent").panelIndex,i=b.$el.videoObject.textTracks;i&&i instanceof TextTrackList?function(){for(var e=0;e<i.length;e++){var t=i[e];o.functions==t.label?(t.mode="showing",o.getPanelOption(l,"parent").childConfig[0].selected=!0,n()):"showing"==t.mode&&(t.mode="hidden")}}():r.rst("the textTracks api is not supported by the browser.")}}],onToggle:function(a,s,e){var c=a.event.currentTarget.querySelector(".toogle-switch").classList.contains("open"),u=b.$el.videoObject.textTracks;u&&u instanceof TextTrackList?function(){if(c)for(var e=0;e<u.length;e++){var t=u[e];"showing"==t.mode&&(t.mode="hidden")}else for(var o=a.getPanelOption(a.panelIndex,"parent").childConfig[1].childConfig,e=0;e<u.length;e++){var n,l=u[e],i=_createForOfIteratorHelper(o);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(l.label==r.functions&&1==r.selected){l.mode="showing";break}}}catch(e){i.e(e)}finally{i.f()}}s()}():r.rst("the textTracks api is not supported by the browser.")}}}}function a(e){"statics"==e&&(m=(new u).defaults,h.initSubtitleOption()&&m.push(h.initSubtitleOption())),!m.map(function(e){return e.name}).includes("subtitle")&&"statics"!=e&&h.initSubtitleOption()&&m.push(h.initSubtitleOption());var t,o=b.$method.getLangObject();for(t in m){var n=m[t].name;"loopPlay"!=n?"playbackRate"!=n?"subtitle"!=n||(m[t].functions=o.subtitles,m[t].childConfig[0].functions=o.open,m[t].childConfig[1].functions=o.selectLangage):(m[t].functions=o.playbackSpeed,m[t].childConfig[3].functions=o.normal):m[t].functions=o.loopPlay}var l=_toConsumableArray(y.customSetting||[]);if(l instanceof Array){for(var i=0;i<l.length;i++){var r=m.map(function(e){return e.name});-1!=r.indexOf(l[i].name)&&m.splice(r.indexOf(l[i].name),1)}(function e(){for(var t=0;t<l.length;t++)!1===l[t].show&&(l.splice(t,1),e())})()}var a=(e=b.option).loop,s=e.live;if(1==a||!0===s)for(var c in m)if("loopPlay"==m[c].name){1==a&&(m[0].selected=!0),!0===s&&m.splice(0,m.length);break}(e=[].concat(_toConsumableArray(m),_toConsumableArray(l))).sort(function(e,t){e=e.zIndex||0,t=t.zIndex||0;return t<e?-1:e<t?1:0}),p.settingConfigs=e,function e(t,o){for(var n=0;n<t.length;n++)t[n].panelIndex=null==o?n.toString():o.toString()+"-"+n,t[n].childConfig instanceof Array&&0<t[n].childConfig.length&&e(t[n].childConfig,t[n].panelIndex)}(p.settingConfigs)}var t=this,g=(y=y||{},"number"==typeof y.fullScaling&&1<y.fullScaling?y.fullScaling:1.2),b={},d=new function(){return{disabledMousemoveEvent:!1,popupNodeInfo:{triggerButtonRect:{},popupRect:{}}}},p={name:"",settingConfigs:null},m=[],r={rst:function(e){b.$method[b.$method.dc("03702W03303B02C03302P037038")](e)}},c={ctxmenuWrapper:function(){return b.$el.mPlayer.querySelector("#ctxmenu-wrapper")},hideShortcutPanel:function(){var e=b.$el.mPlayer.querySelector("#mplayer-shortcut");e&&(e.style.display="none")},hideCtxmenuList:function(e){(e=e||{}).stopPropagation&&e.stopPropagation();var t=c.ctxmenuWrapper().querySelector(".ctxmenulist");t.style.opacity=0,b._this._global_.ctxmenuTimer_1=setTimeout(function(){t.style.display="none"},100)},onCtxmenuFocus:function(e){b._this._global_.ctxmenuTimer_1&&clearTimeout(b._this._global_.ctxmenuTimer_1),b._this._global_.ctxmenuTimer_2&&clearTimeout(b._this._global_.ctxmenuTimer_2),c.ctxmenuWrapper().style.display="block",c.hideShortcutPanel()},onCtxmenuBlur:function(e){(e=e||{}).stopPropagation&&e.stopPropagation(),c.hideCtxmenuList(),b._this._global_.ctxmenuTimer_2=setTimeout(function(){c.ctxmenuWrapper().style.display="none",c.ctxmenuWrapper().removeChild(e.target)},300)},disCtx:function(o,e){for(var t=0;t<o.length;t++){var n=e.map(function(e){return e.name}).indexOf(o[t].name);-1!=n&&e.splice(n,1)}(function e(){for(var t=0;t<o.length;t++)!1!==o[t].show&&o[t].name&&o[t].context||(o.splice(t,1),e())})()},getCtxmenu:function(){var e=new this.dcm,t=[];(t=_toConsumableArray(y.contextmenu||[]))instanceof Array&&this.disCtx(t,e);var o,e=[].concat(_toConsumableArray(t),_toConsumableArray(e)),n=b.$method.getLangObject(),l=_createForOfIteratorHelper(e);try{for(l.s();!(o=l.n()).done;){var i=o.value;if("shortcuts"==i.name){i.context=n.shortcuts;break}}}catch(e){l.e(e)}finally{l.f()}return e.sort(function(e,t){e=e.zIndex||0,t=t.zIndex||0;return t<e?-1:e<t?1:0}),e},createCtxmenu:function(e){var t=c.getCtxmenu();if(2==e.button&&0!=t.length&&!b.$el.mPlayer.hasAttribute("miniplayer")){var o=document.createElement("ul");o.setAttribute("class","ctxmenulist"),o.setAttribute("tabindex","0"),o.addEventListener("blur",c.onCtxmenuBlur),c.onCtxmenuFocus();for(var n=t.map(function(e){return e.name}),l=0;l<t.length;l++){var i=document.createElement("li");i.innerText=t[l].context,i.setAttribute("name",t[l].name),i.addEventListener("dblclick",function(e){e.stopPropagation()}),i.addEventListener("mousemove",function(e){e.stopPropagation()}),i.addEventListener("click",function(e){e.stopPropagation();e=n.indexOf(e.currentTarget.getAttribute("name"));t[e].click instanceof Function&&t[e].click(function(){b.$el.mPlayer.focus()})}),o.appendChild(i)}b.$method.removeNode(c.ctxmenuWrapper(),".ctxmenulist"),c.ctxmenuWrapper().appendChild(o),w.setElScale(o,{fontSize:14});var r=b.$el.mPlayer.getBoundingClientRect(),a=o.getBoundingClientRect(),s=e.clientX-r.left+a.width>r.width?r.width-a.width:e.clientX-r.left,r=e.clientY-r.top+a.height>r.height?r.height-a.height:e.clientY-r.top;o.style.top=r+"px",o.style.left=s+"px",o.focus(),setTimeout(function(){o.style.opacity=1},100)}},dcm:function(){var e=b.$method.dc;return[{name:e("03702W03303603802R039038037"),context:e("IY3JNBTGU"),click:function(){var e=b.$el.mPlayer.querySelector("#mplayer-shortcut");e&&(e.style.display="block"),b.$el.mPlayer.focus()}}]},onContextmenuEvent:function(e){e.preventDefault()}},s={togglePictureIcon:function(){return document.pictureInPictureElement?'<svg class="off-picture" xmlns="http://www.w3.org/2000/svg"viewBox="0 0 24 24"fill="#ffffff"><path d="m19,7l-14,0l0,10l14,0l0,-10zm4,12l0,-14.02c0,-1.1 -0.9,-1.98 -2,-1.98l-18,0c-1.1,0 -2,0.88 -2,1.98l0,14.02c0,1.1 0.9,2 2,2l18,0c1.1,0 2,-0.9 2,-2zm-2,0.02l-18,0l0,-14.05l18,0l0,14.05z"/><path fill="none"d="m0,0l24,0l0,24l-24,0l0,-24z"/></svg>':'<svg class="on-picture" xmlns="http://www.w3.org/2000/svg"viewBox="0 0 24 24"fill="#ffffff"><path d="M19 11h-8v6h8v-6zm4 8V4.98C23 3.88 22.1 3 21 3H3c-1.1 0-2 .88-2 1.98V19c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H3V4.97h18v14.05z"/><path fill="none"d="M0 0h24v24H0V0z"/></svg>'},monitorPictureChange:function(){var t;b._this._global_.webpagePlugin.addMonitorPictureEvent||(b._this._global_.webpagePlugin.addMonitorPictureEvent=!0,t=function(){b.$el.mplayerFooter.querySelector("#picture-in-picture").innerHTML=s.togglePictureIcon()},b.$el.videoObject.addEventListener("enterpictureinpicture",function(e){b._this.emit("pip-change",{pip:!0}),t(),b.$data.isFullScreen&&b.$method.closeFullScreen(),b.$method.setTooltipText(b.$el.mplayerFooter.querySelector("#picture-in-picture"),b.$method.getLangObject().exitPictureInPicture)}),b.$el.videoObject.addEventListener("leavepictureinpicture",function(e){b._this.emit("pip-change",{pip:!1}),t(),b.$method.setTooltipText(b.$el.mplayerFooter.querySelector("#picture-in-picture"),b.$method.getLangObject().pictureInPicture)}))},onPictureInPicture:function(e){e.currentTarget.querySelector("svg").classList.contains("on-picture")?b.$el.videoObject!=document.pictureInPictureElement&&b.$el.videoObject.requestPictureInPicture():document.exitPictureInPicture(),s.monitorPictureChange()}},f={volumeContainer:null,el:null,$el:function(){return{volumeSize:f.volumeContainer.querySelector(".volume-size"),volumeCapacity:f.volumeContainer.querySelector(".volume-capacity"),volumeDragBall:f.volumeContainer.querySelector(".volume-drag-ball"),progressBar:f.volumeContainer.querySelector(".progress-bar")}},data:null,$data:function(){return{startY:null,moveY:null,_defaultVolumeSize:null,_capacityRect:{},_dragBallRect:{}}},toggleVolumeControl:function(e){var t;e=!0===f.getStorageVolume().muted?0:e,f.data&&(t=f.data._capacityRect.height*(e/100)-f.data._dragBallRect.height,f.el.volumeDragBall.style.bottom=(0<t?t:0)+"px",f.el.progressBar.style.height=e+"%",f.el.volumeSize.innerText=e+"%"),b.$el.mplayerFooter.querySelector("#volume-switch").innerHTML=f.toggleVolumeIcon()},setVolume:function(e,t){t=Number.parseFloat(f.data._defaultVolumeSize||0)+(null==t?100:t);return 100<=t?t=100:t<=0&&(t=0),t=Number.parseInt(t),e instanceof Object&&"number"==typeof e.volume&&(t=e.volume),f.setStorageVolume(t),b.$el.videoObject.volume=t/100,f.toggleVolumeControl(t),t},computeProgress:function(e,t){t(e/f.el.volumeCapacity.getBoundingClientRect().height*100)},keyEventHandle:function(e){var t=b.$method.getKeyCode(e);-1!=new Array(13,38,40).indexOf(t)&&(e.stopPropagation(),e.preventDefault()),13!=t?38!=t?40==t&&n.bottomKeyDown():n.topKeyDown():f.onClickEvent({currentTarget:b.$el.mplayerFooter.querySelector("#volume-switch")},!0)},mouseEventHandle:function(t){switch(t.type){case"mousedown":!function(){f.data.startY=t.clientY;var e=f.el.volumeCapacity.getBoundingClientRect().bottom-t.clientY;f.computeProgress(e,function(e){b.$el.videoObject.muted&&(b.$el.videoObject.muted=!1);e=f.setVolume(!1,e);b._this._global_.webpagePlugin.startDownVolumeSize=e,f.data._defaultVolumeSize=f.el.progressBar.style.height.substr(0,f.el.progressBar.style.height.length-1)||0}),f.el.volumeDragBall.style.boxShadow="0 0 20px 3px "+b.$habit.themeColor,h.focusToggle("OFF"),f.volumeContainer.addEventListener("mousemove",f.mouseEventHandle),f.volumeContainer.addEventListener("mouseup",f.mouseEventHandle)}();break;case"mousemove":!function(){f.data.moveY=t.clientY,f.data.startY||(f.data.startY=t.clientY);var e=f.data.startY-f.data.moveY;f.computeProgress(e,function(e){e=f.setVolume(!1,e);b._this._global_.webpagePlugin.endDownVolumeSize=e})}();break;case"mouseup":f.data._defaultVolumeSize=0,f.el.volumeDragBall.style.boxShadow="none",f.volumeContainer.removeEventListener("mousemove",f.mouseEventHandle),f.volumeContainer.removeEventListener("mouseup",f.mouseEventHandle)}},getStorageVolume:function(){var e={};try{e=JSON.parse(window.localStorage.getItem("mp-player-volume"))||{}}catch(e){}return e},setStorageVolume:function(e,t){var o=f.getStorageVolume(),n=null!=t?o.volume||100:e,o=null!=t?t:b.$el.videoObject instanceof Element&&b.$el.videoObject.muted,e=(new Date).setMonth((new Date).getMonth()+1),t=(new Date).getTime();window.localStorage.setItem("mp-player-volume",JSON.stringify({volume:n,muted:o,expiration:e,creation:t}))},toggleVolumeIcon:function(){var e='<svg class="volume-full"fill="#ffffff"viewBox="0 0 24 24"xmlns="http://www.w3.org/2000/svg"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/><path d="M0 0h24v24H0z" fill="none"/></svg>',t='<svg fill="#ffffff"viewBox="0 0 24 24"xmlns="http://www.w3.org/2000/svg"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/><path d="M0 0h24v24H0z" fill="none"/></svg>',o='<svg class="volume-close"fill="#ffffff"viewBox="0 0 24 24"xmlns="http://www.w3.org/2000/svg"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>',n=f.getStorageVolume();return n.expiration<=(new Date).getTime()?e:!0===n.muted||0==n.volume?o:n.volume<50?t:e},createVolumePopup:function(){var e=(new w.popupInstance).createPopupElement();return e.setAttribute("popup-name","volume"),e.innerHTML='<div class="volume-container keyboard-input"id="volume-container"tabindex="0"><div class="volume-size">0%</div><div class="volume-capacity"><div class="volume-drag-ball"></div><div class="progress-bar"></div></div></div>',e.querySelector(".progress-bar").style.backgroundColor=b.$habit.themeColor,f.volumeContainer=e.querySelector("#volume-container"),f.el=new f.$el,f.data=new f.$data,f.volumeContainer.addEventListener("mousedown",f.mouseEventHandle),f.volumeContainer.addEventListener("keydown",f.keyEventHandle),f.volumeContainer.addEventListener("blur",function(){(new w.popupInstance).togglePopupVisible("OFF")}),e},showVolumePopup:function(e){var t;e=e||{},b.$data.isTouchMove||((t=b.$el.mPlayer.querySelector(".mp-popup"))||(t=f.createVolumePopup(),"keydown"==e.type&&setTimeout(function(){t.querySelector("#volume-container").focus()},100),b.$el.mplayerFooter.insertBefore(t,b.$el.mplayerFooter.childNodes[0]),b.$data.isFullScreen&&(w.setElScale(t,["width","height"]),w.setElScale(t.querySelector(".volume-capacity"),["width","height"]),w.setElScale(t.querySelector(".volume-drag-ball"),["width","height"]),w.setElScale(t.querySelector(".volume-container"),["fontSize"])),f.data._capacityRect=f.el.volumeCapacity.getBoundingClientRect(),f.data._dragBallRect=f.el.volumeDragBall.getBoundingClientRect(),e=f.getStorageVolume(),f.setVolume(e),(new w.popupInstance).setVisiblePopup(t,b.$el.mplayerFooter.querySelector("#volume-switch"))))},onClickEvent:function(e,t){var o,n;!1!==e.currentTarget.exist&&(e.currentTarget.querySelector("svg").classList.contains("volume-close")?(f.setStorageVolume(null,!1),o=f.getStorageVolume().volume||100,n=b._this._global_.webpagePlugin.endDownVolumeSize,e=b._this._global_.webpagePlugin.startDownVolumeSize,f.toggleVolumeControl(0==n?e:n||o),b.$el.videoObject.muted=!1):(f.setStorageVolume(null,!0),f.toggleVolumeControl(0),b.$el.videoObject.muted=!0),!0===t&&(b.$method.createTimerCloseControl(),w.showHandleIcon("volume-icon")))}},h={currentFocusPanelId:"",isFocusActive:!1,backPanel:function(e){var t=h.getPanelOption(e,"parent");h.showPanel(t,"previous",e)},selected:function(e){for(var t=b.$el.mPlayer.querySelector(".mp-popup"),o=t.querySelectorAll(".mp-panel-selected"),n=0;n<o.length;n++)o[n].classList.remove("mp-panel-selected");t.querySelector('[panel-index="'+e+'"]').classList.add("mp-panel-selected");for(var l=h.getPanelOption(e,"parent").childConfig||[],n=0;n<l.length;n++)l[n].panelIndex==e?l[n].selected=!0:l[n].selected&&"switch"!=l[n].model&&(l[n].selected=!1)},switched:function(e){var t=h.getPanelOption(e);t.selected=!t.selected;e=b.$el.mPlayer.querySelector('.mp-popup [panel-index="'+e+'"] .toogle-switch');e.classList.remove(t.selected?"close":"open"),e.classList.add(t.selected?"open":"close")},triggerSelected:function(t,e){var o,n;e.stopPropagation(),t&&(t.childConfig instanceof Array&&0<t.childConfig.length?h.showPanel(t):"switch"!=t.model&&!0===t.selected||(n=null,(n=(o=h.getPanelOption(t.panelIndex,"parent"))instanceof Array?t:o).onToggle instanceof Function&&n.onToggle({functions:t.functions,panelIndex:t.panelIndex,getPanelOption:h.getPanelOption,event:e},function(e){"switch"==t.model?h.switched(t.panelIndex):h.selected(t.panelIndex),e instanceof Function&&e()},function(e){o instanceof Object&&o.childConfig instanceof Array&&0<o.childConfig.length?setTimeout(function(){h.backPanel(o.panelIndex)},"number"==typeof e?e:100):console.warn("no subpanel configuration options are available")})))},setScalePopup:function(e){if(b.$data.isFullScreen&&e instanceof Element){w.setElScale(e,["width","height",e.classList.contains("mp-popup")?"fontSize":""]),w.setElScale(e.querySelector(".toogle-switch"),["width","height"]),w.setElScale(e.querySelector(".toogle-switch .ball"),["width","height"]);for(var t=e.querySelectorAll(".mp-menuitem"),o=0;o<t.length;o++)w.setElScale(t[o],["height","lineHeight"])}},isNextReady:!0,showPanel:function(e,o,t){var n,s,c,u,l,p,i,r,a;h.isNextReady&&(n=h.createSettingPopup(e),s=b.$el.mPlayer.querySelector(".mp-popup"),c=s.querySelector(".mp-panel-item"),s.appendChild(n.childNodes[0]),e=e instanceof Array?"homeSetting":e.functions,(u=s.querySelector('[panel-name="'+e+'"]')).classList.add("mp-panel-item"),h.setScalePopup(u),l=s.getBoundingClientRect(),p=c.getBoundingClientRect(),i=u.getBoundingClientRect(),e=(e=b.$el.mPlayer.getBoundingClientRect()).height-(e.height-i.bottom)-(e.top+10),r=i.height>=e?e:i.height,u.style.width=i.width+"px",u.style.height=r+"px",u.style.right=("previous"==o?p.width:-i.width)+"px",e=u.querySelector(".mp-panel-menu .mp-panel-selected"),t=u.querySelector('[panel-index="'+t+'"]'),a=e||t||u.querySelector("[panel-index]"),setTimeout(function(){a.focus()},250),setTimeout(function(){for(var e=s.querySelectorAll(".mp-panel"),t=0;t<e.length;t++)e[t].classList.contains("mp-popup-animation")||e[t].classList.add("mp-popup-animation");s.classList.contains("mp-popup-animation")||s.classList.add("mp-popup-animation"),c.style.opacity=0,c.style.right=("previous"==o?-p.width:i.width)+"px",l.width!=i.width&&(s.style.width=i.width+"px"),l.height!=r&&(s.style.height=r+"px"),u.style.right="0px",h.currentFocusPanelId=""},30),h.isNextReady=!1,setTimeout(function(){var e=s.getBoundingClientRect(),t=e.bottom,o=e.height,n=e.left,l=e.right,i=e.top,r=e.width,a=e.x,e=e.y;d.popupNodeInfo.popupRect={bottom:t,height:o,left:n,right:l,top:i,width:r,x:a,y:e},p.top<u.getBoundingClientRect().top&&(d.popupNodeInfo.popupRect.top=p.top,d.popupNodeInfo.popupRect.height=p.height),h.isNextReady=!0,s.removeChild(c)},250))},getPanelOption:function(i,r){var a=!1,s=null;return function e(t,o){for(var n=0;n<t.length&&!a;n++){var l=t[n];l.panelIndex==i?(a=!0,s="parent"==r?o:l):l.childConfig instanceof Array&&0<l.childConfig.length&&e(l.childConfig,l)}}(p[p.name],p[p.name]),s},setCurrentModelEl:function(e){var t=e.childConfig,o=e.model||"select",n="";if("select"==o&&t instanceof Array&&0<t.length){for(var l=0;l<t.length;l++)if(!0===t[l].selected){n=t[l].functions||"";break}}else"switch"==o&&(n='<div class="toogle-switch '+(e.selected?"open":"close")+'" id="toggle-fit" style="background: '+b.$habit.themeColor+';"><div class="ball"></div></div>');return n},createSettingPopup:function(t){var e=(new w.popupInstance).createPopupElement();e.setAttribute("popup-name","setting"),t instanceof Array?e.innerHTML='<div class="mp-panel" panel-name="homeSetting"><div class="mp-panel-menu"></div></div>':(e.innerHTML='<div class="mp-panel mp-panel-child" panel-name="'+t.functions+'"><div class="mp-panel-menu"><ul class="mp-menuitem mp-panel-header"><li class="title"><div class="mp-menuitem-content left-arrow-icon">'+t.functions+"</div></li><li></li></ul></div></div>",e.querySelector(".mp-panel-header .title").addEventListener("click",function(e){e.stopPropagation(),h.isFocusActive=!0,h.backPanel(t.panelIndex)}));for(var o=t instanceof Array?t:t.childConfig,n=0;n<o.length;n++){var l,i,r,a=o[n]||{},s=a.model||"select";a.functions&&"string"==typeof a.functions&&((l=document.createElement("ul")).setAttribute("class","mp-menuitem"),l.setAttribute("panel-index",a.panelIndex),l.setAttribute("tabindex","0"),!0!==a.selected||"select"!=s||t instanceof Array||l.classList.add("mp-panel-selected"),(i=document.createElement("li")).innerHTML=a.functions,r=document.createElement("li"),(s=document.createElement("div")).setAttribute("class","mp-menuitem-content"),a.childConfig instanceof Array&&0<a.childConfig.length&&s.classList.add("arrow-icon"),"switch"==a.model&&s.classList.add("switch-icon"),s.innerHTML=h.setCurrentModelEl(a),r.appendChild(s),l.appendChild(i),l.appendChild(r),l.addEventListener("click",function(e){var t=h.getPanelOption(e.currentTarget.getAttribute("panel-index"));h.triggerSelected(t,e)}),l.addEventListener("mousedown",function(){h.focusToggle("OFF")}),l.addEventListener("blur",function(e){h.isFocusActive=!1,h.currentFocusPanelId=""}),l.addEventListener("focus",function(e){h.isFocusActive=!0,h.currentFocusPanelId=e.currentTarget.getAttribute("panel-index")}),l.addEventListener("keydown",function(e){h.settingOnKeyDownAction(e)}),e.querySelector(".mp-panel-menu").appendChild(l))}return e},showSettingPopup:function(e,t){if(e=e||{},!b.$data.isTouchMove){var o=b.$el.mPlayer.querySelector(".mp-popup");if(!o){a(),o=h.createSettingPopup(p[p.name]),setTimeout(function(){o.querySelector("[panel-index]").focus()},100),b.$el.mplayerFooter.insertBefore(o,b.$el.mplayerFooter.childNodes[0]),h.setScalePopup(o),(new w.popupInstance).setVisiblePopup(o,e.currentTarget,t);for(var n=o.getBoundingClientRect(),t=b.$el.mPlayer.getBoundingClientRect(),t=t.height-(t.height-n.bottom)-(t.top+10),l=n.height>=t?t:n.height,i=o.querySelectorAll(".mp-popup .mp-panel,.mp-popup .mp-panel-menu"),r=0;r<i.length;r++)i[r].style.width=n.width+"px",i[r].style.height=l+"px";o.style.width=n.width+"px",o.style.height=l+"px",o.querySelector(".mp-panel").classList.add("mp-panel-item")}}},focusToggle:function(e){var t=b.$el.mPlayer;"ON"==e?t.classList.contains("mp-keyboard-focus")||t.classList.add("mp-keyboard-focus"):t.classList.contains("mp-keyboard-focus")&&t.classList.remove("mp-keyboard-focus")},settingOnKeyDownAction:function(e){var t=b.$el.mPlayer.querySelector(".mp-popup"),o=b.$method.getKeyCode(e);if(h.focusToggle("ON"),-1!=new Array(13,32,37,38,39,40).indexOf(o)&&(e.stopPropagation(),e.preventDefault()),32!=o&&13!=o)if(37!=o)if(38!=o)if(39!=o){if(40==o){l=[];l=(n=h.getPanelOption(h.currentFocusPanelId,"parent"))instanceof Array?n:(n||{}).childConfig||[];for(r=0;r<l.length;r++)if(l[r].panelIndex==h.currentFocusPanelId){r!=l.length-1?(i=l[r+1].panelIndex,t.querySelector('[panel-index="'+i+'"]').focus()):t.querySelector('[panel-index="'+l[0].panelIndex+'"]').focus();break}}}else(n=h.getPanelOption(h.currentFocusPanelId,"current"))&&n.childConfig instanceof Array&&0<n.childConfig.length&&h.showPanel(n,"next");else{var n,l=[];l=(n=h.getPanelOption(h.currentFocusPanelId,"parent"))instanceof Array?n:(n||{}).childConfig||[];for(var i,r=0;r<l.length;r++)if(l[r].panelIndex==h.currentFocusPanelId){0==r?t.querySelector('[panel-index="'+l[l.length-1].panelIndex+'"]').focus():(i=l[r-1].panelIndex,t.querySelector('[panel-index="'+i+'"]').focus());break}}else{var a=t.querySelector(".mp-panel-header .title");a&&a.click()}else{a=h.getPanelOption(h.currentFocusPanelId);h.triggerSelected(a,e)}},onSettingKeyDown:function(e,t){e.preventDefault(),b.$el.mplayerFooter.querySelector(".mp-popup").querySelector("[panel-index]").focus(),h.focusToggle("ON"),h.settingOnKeyDownAction(e)},initSubtitleOption:function(){var e=b.$el.videoObject?b.$el.videoObject.textTracks:"";if(e&&e instanceof TextTrackList&&0<e.length){var t=(new u).subtitle;t.childConfig[1].childConfig.splice(0,t.childConfig[1].childConfig.length);for(var o=0;o<e.length;o++){var n=e[o];t.childConfig[1].childConfig.push({functions:n.label,selected:"showing"==n.mode})}return t}}},n={toggleVisible:function(e,t){if(!0===e&&b.$data.showScreenControls)return b.$method.createTimerCloseControl(),void(b._this._global_.webpagePlugin.hiddleControl||t instanceof Function&&t());!0!==e||b.$data.showScreenControls||(b.$method.toggleControlsDisplay({type:"showControls"}),b._this._global_.webpagePlugin.hiddleControl=!0,setTimeout(function(){b._this._global_.webpagePlugin.hiddleControl=!1,t instanceof Function&&t()},300))},escKeyDown:function(){(new w.popupInstance).togglePopupVisible("OFF"),h.focusToggle("OFF"),b.$el.mPlayer.focus()},confirmKeyDown:function(e){(new t.interface)._onAgentMpTap("click"),n.escKeyDown()},leftKeyDown:function(){var e;!0!==b.option.live&&(n.toggleVisible(!0),e=b.$el.videoObject.currentTime-5,b.$data.currentTime=0<e?e:.1,b.$el.videoObject.currentTime=b.$data.currentTime,w.showHandleIcon("progress-back"),(new w.popupInstance).togglePopupVisible("OFF"))},rightKeyDown:function(){var e,t;!0!==b.option.live&&(n.toggleVisible(!0),e=b.$data,(t=b.$el.videoObject.currentTime+5)<=e.duration?b.$data.currentTime=t:b.$data.currentTime=Number.parseInt(e.duration),b.$el.videoObject.currentTime=b.$data.currentTime,w.showHandleIcon("progress-forward"),(new w.popupInstance).togglePopupVisible("OFF"))},topKeyDown:function(){!1!==b.$el.mplayerFooter.querySelector("#volume-switch").exist&&(n.toggleVisible(!0,function(){var e=f.getStorageVolume(),t=e.volume;!0===e.muted?(b.$el.videoObject.muted=!1,t=5):t+=5,f.showVolumePopup(),f.setVolume(!1,t)}),w.showHandleIcon("volume-icon"))},bottomKeyDown:function(){!1!==b.$el.mplayerFooter.querySelector("#volume-switch").exist&&(n.toggleVisible(!0,function(){var e=f.getStorageVolume(),t=e.volume;!0===e.muted?(b.$el.videoObject.muted=!1,t=5):t-=5,f.showVolumePopup(),f.setVolume(!1,t)}),w.showHandleIcon("volume-icon"))},onDocKeydown:function(e){var t=b.$method.getKeyCode(e);-1!=new Array(37,38,39,40,32,13).indexOf(t)&&(e.stopPropagation(),e.preventDefault()),70!=t?77!=t?27!=t?32!=t&&75!=t?37!=t?38!=t?39!=t?40==t&&n.bottomKeyDown():n.rightKeyDown():n.topKeyDown():n.leftKeyDown():n.confirmKeyDown(e):n.escKeyDown():f.onClickEvent({currentTarget:b.$el.mplayerFooter.querySelector("#volume-switch")},!0):(e=b.$el.mplayerFooter.querySelector("#full-switch"))instanceof Element&&e.click()}},v={},w={popupInstance:function(){this.createPopupElement=function(){var e=document.createElement("div");return e.setAttribute("class","mp-popup"),e},this.setVisiblePopup=function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;this.togglePopupVisible("ON");var n=b.$data.isFullScreen,l=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=b.$el.mPlayer.getBoundingClientRect(),a=b.$el.touchEffective instanceof Element?b.$el.touchEffective.getBoundingClientRect():{},n=r.width-l.left+r.left-i.width/2-l.width/2+o*(n?g:1);e.style.right=(12<=n?n:12)+"px";r=r.height-(a.top||l.top-5)+r.top;return e.style.bottom=r+"px",d.popupNodeInfo.triggerButtonRect=t.getBoundingClientRect(),d.popupNodeInfo.popupRect=e.getBoundingClientRect(),e},this.togglePopupVisible=function(e){var t=!!b.$el.mPlayer&&b.$el.mPlayer.querySelector(".mp-popup");t&&(t.classList.add("popup-toggle"),"OFF"==e?(b.$el.mPlayer.focus(),t.style.opacity=0,setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t)},110),b._this._global_.webpagePlugin.showSettingState=!1,b.$method.createTimerCloseControl(),document.removeEventListener("mousemove",w.onDocMousemoveEvent)):(setTimeout(function(){t.style.opacity=1},5),setTimeout(function(){t.classList.remove("popup-toggle")},110),b._this._global_.webpagePlugin.showSettingState=!0,setTimeout(function(){b.$method.createTimerCloseControl({type:"cancel"})},100),document.addEventListener("mousemove",w.onDocMousemoveEvent)))}},onEffectiveOverEvent:function(e){var t=(e=e||{}).type||"";if(!b._this._global_.webpagePlugin.showSettingState){var o=y.prompt,n=void 0===o?{}:o,l=function(e){var t=b.$el.touchEffective.querySelectorAll("#progress-total,#progress-buffered,#progress-play,#progress-prompt,#progress-seekline");if(e){for(var o=0;o<t.length;o++)t[o].classList.add("progress-hover-scale");b.$el.progressBall.classList.add("hover-scale"),b.$el.touchEffective.querySelector(".mp-tooltip").style.display="block",b.$el.touchEffective.querySelector(".mp-thumbnails").style.display="block",b.$el.touchEffective.querySelector(".progress-seekline").style.visibility="visible",!0===n.hoverShow&&(b.$el.touchEffective.querySelector(".prompts-container").style.visibility="visible")}if(!e){for(o=0;o<t.length;o++)t[o].classList.remove("progress-hover-scale");b.$el.progressBall.classList.remove("hover-scale"),b.$el.touchEffective.querySelector(".mp-tooltip").style.display="none",b.$el.touchEffective.querySelector(".mp-thumbnails").style.display="none",b.$el.touchEffective.querySelector(".progress-seekline").style.visibility="hidden",!0===n.hoverShow&&(b.$el.touchEffective.querySelector(".prompts-container").style.visibility="hidden")}};switch(t){case"mouseover":l(!0),w.showTimeTooltip(e),w.showThumbnails(e),v._showSeekLine&&v._showSeekLine(e),b.$el.touchEffective.addEventListener("mousemove",w.onEffectiveOverEvent),b.$el.touchEffective.addEventListener("mouseout",w.onEffectiveOverEvent);break;case"mousemove":l(!0),w.showTimeTooltip(e),w.showThumbnails(e),v._showSeekLine&&v._showSeekLine(e);break;case"mouseout":l(!1),b.$el.touchEffective.removeEventListener("mousemove",w.onEffectiveOverEvent),b.$el.touchEffective.removeEventListener("mouseout",w.onEffectiveOverEvent)}}},addControlTooltip:function(e){for(var t=b.$el.mplayerFooter.querySelectorAll(".footer-control"),o=0;o<t.length;o++)t[o].getAttribute("tooltip")&&(t[o].addEventListener("mouseover",function(e){var t,o,n,l=document.createElement("div");l.setAttribute("class","mp-tooltip"),l.innerText=e.currentTarget.getAttribute("tooltip"),!1!==b.$el.mplayerFooter.querySelector(".mp-tooltip").exist||b.$data.isTouchMove||(b.$el.mplayerFooter.insertBefore(l,b.$el.mplayerFooter.childNodes[0]),t=e.currentTarget.getBoundingClientRect(),o=l.getBoundingClientRect(),n=b.$el.mPlayer.getBoundingClientRect(),e=b.$el.touchEffective instanceof Element?b.$el.touchEffective.getBoundingClientRect():{},o=n.width-t.left+n.left-o.width/2-t.width/2,l.style.right=(16<=o?o:16)+"px",n=n.height-(e.top||t.top-5)+n.top,l.style.bottom=n+"px")}),t[o].addEventListener("mouseout",function(e){b.$method.removeNode(b.$el.mplayerFooter,".mp-tooltip")}))},thumbnailStyleAtBottom:function(){return b.$data.isFullScreen?25.6*g:25.92},showThumbnails:function(e){var t,o,n,l=b.$el.touchEffective.querySelector(".mp-thumbnails"),i=b.$el.mPlayer.querySelector("#mplayer-media-wrapper").getBoundingClientRect(),r=b.$el.touchEffective.getBoundingClientRect(),a=0,s=0,c=y.thumbnails||{},u=c.preview||[],p=c.tile||[10,10],d=c.scale||[160,90],g=p[0]||10,p=p[1]||10,m=d[0]||160,f=d[1]||90,h=c.async,v=g*p;(0<u.length||"function"==typeof h)&&(o=function(){var e=a%g==0?0:parseInt(a%g)*m,t=a/g<1?0:parseInt(a/g)*f;!function(){!1===l.exist&&((l=document.createElement("div")).setAttribute("class","mp-thumbnails thumbnails-scale"),l.style.outline="2px #FFFFFF solid",l.style.width=m+"px",l.style.height=f+"px",l.style.position="absolute",l.style.pointerEvents="none");var e=b.$el.touchEffective.querySelector('[data-playimage-index="'+s+'"]');!1===e.exist?((e=document.createElement("div")).setAttribute("class","preview-image"),e.setAttribute("data-playimage-index",s),e.style.width="100%",e.style.height="100%",l.appendChild(e),b.$el.touchEffective.appendChild(l)):l.appendChild(e),u[s]&&!e.style.backgroundImage&&(e.style.backgroundImage="url("+u[s]+")");for(var t=b.$el.touchEffective.querySelectorAll(".preview-image"),o=0;o<t.length;o++){var n=t[o].getAttribute("data-playimage-index");t[o].style.display=n!=s?"none":"block"}}();var o=l.getBoundingClientRect();b.$el.touchEffective.querySelector('[data-playimage-index="'+s+'"]').style.backgroundPosition=-e+"px "+-t+"px";e=w.thumbnailStyleAtBottom();l.style.bottom=Math.round(e)+"px";t=n-o.width/2,e=r.left-i.left+t,o=i.width-(r.left-i.left+t+o.width);12<=e&&12<=o&&(l.style.left=t+"px")},n=e.clientX-r.left,b.$method.computeProgress(n,b.$el.touchEffective,function(e){100<=e?e=100:e<=0&&(e=0),t=parseInt(e/100*b.$data.duration),a=t,s=parseInt(a/v),"function"==typeof h&&(h(e={client:{},put:function(e){e.forEach(function(e){var t=e.index,e=e.src;y.thumbnails.preview||(y.thumbnails.preview=[]),y.thumbnails.preview[t]=e})}}),e.client.receive instanceof Function&&e.client.receive({time:t,thumbnail_image_index:s})),o()}))},showTimeTooltip:function(e){var l=b.$el.touchEffective.getBoundingClientRect(),i=b.$el.mPlayer.querySelector("#mplayer-media-wrapper").getBoundingClientRect(),r=e.clientX-l.left;b.$method.computeProgress(r,b.$el.touchEffective,function(e){100<=e?e=100:e<=0&&(e=0);var t=e/100*b.$data.duration,o=b.$method.formatCurrentTime(t),n=b.$el.touchEffective.querySelector(".mp-tooltip");!1===n.exist&&((n=document.createElement("div")).setAttribute("class","mp-tooltip"),b.$el.touchEffective.appendChild(n));e=w.thumbnailStyleAtBottom();n.style.bottom=Math.round(e+2)+"px";t=n.getBoundingClientRect();n.innerText=o;e=r-t.width/2,o=l.left-i.left+e,t=i.width-(l.left-i.left+e+t.width);12<=o&&12<=t&&(n.style.left=e+"px")})},addFocusKeyboardHandle:function(){for(var e=b.$el.mPlayer.querySelectorAll(".keyboard-input"),t=0;t<e.length;t++)e[t].addEventListener("keydown",function(e){var t=b.$method.getKeyCode(e),o=e.currentTarget.getAttribute("id");-1!=new Array(13,32).indexOf(t)&&((new w.popupInstance).togglePopupVisible("OFF"),32!=t&&("setting-switch"!=o?"volume-switch"!=o?e.currentTarget.click():f.showVolumePopup(e):h.showSettingPopup(e)))}),e[t].addEventListener("mousedown",function(e){b._this._global_.webpagePlugin.inputMousedownFlag=!0,h.focusToggle("OFF"),b.$method.createTimerCloseControl()}),e[t].addEventListener("focus",function(e){setTimeout(function(){b._this._global_.webpagePlugin.inputMousedownFlag||h.focusToggle("ON"),b._this._global_.webpagePlugin.inputMousedownFlag=!1,w.onMpMousemoveEvent(),document.activeElement.classList.contains("keyboard-input")&&b.$method.createTimerCloseControl({type:"cancel"})},10)}),e[t].addEventListener("blur",function(){b.$el.mPlayer.querySelector(".mplayer-sidebar.open")||b.$method.createTimerCloseControl()})},onMpMousemoveEvent:function(){d.disabledMousemoveEvent||(b.$data.showScreenControls?b._this._global_.webpagePlugin.showSettingState||b.$method.createTimerCloseControl():b.$method.toggleControlsDisplay({type:"showControls"}),b._this._global_.webpagePlugin.forControlsClose=!1)},onMpMouseleaveEvent:function(e){d.disabledMousemoveEvent||(b._this._global_.webpagePlugin.showSettingState||b._this._global_.webpagePlugin.forControlsClose||b.$data.isTouchMove||b.$method.toggleControlsDisplay({type:"hideControls"}),b._this._global_.webpagePlugin.forControlsClose=!0)},onDocMousemoveEvent:function(e){var t=d.popupNodeInfo.popupRect,o=d.popupNodeInfo.triggerButtonRect,n=t.left,l=t.left+t.width,i=t.top,r=t.top+t.height,l=e.clientX>n&&e.clientX<l&&e.clientY>i&&e.clientY<r,i=o.left-15,r=o.left+o.width+15,t=t.bottom-5,o=o.bottom+5,o=e.clientX>i&&e.clientX<r&&e.clientY>t&&e.clientY<o;l||o||!h.isNextReady||(new w.popupInstance).togglePopupVisible("OFF")},setElScale:function(e,t){var o=b.$data.isFullScreen,n={};if(Array.isArray(t)?t.forEach(function(e){n[e]=""}):n=t,e instanceof Element){var l=function(e){return Math.round(e)},i=function(e){return Number(e.replace("px",""))},r=e.getBoundingClientRect(),a=e.getAttribute("stylesheet");try{a=a?JSON.parse(a):{}}catch(e){}var s,c,u,p,d=function(){e.style.lineHeight=o?l((n.lineHeight||r.height)*g)+"px":(n.lineHeight||l(r.height*g))+"px"};for(s in n)switch(s){case"width1":p=void 0,o?(p=l((n.width||r.width)*g),e.style.width=(p%2==0?p:p+1)+"px"):e.style.width=n.width?n.width+"px":a.width||l(r.width/g)+"px";break;case"height1":u=void 0,o?(u=l((n.height||r.height)*g),e.style.height=(u%2==0?u:u+1)+"px"):e.style.height=n.height?n.height+"px":a.height||l(r.height/g)+"px";break;case"fontSize1":c=void 0,c=document.defaultView.getComputedStyle(e,null).fontSize,e.style.fontSize=o?l((n.fontSize||i(c))*g)+"px":n.fontSize?n.fontSize+"px":a.fontSize||l(i(c)/g)+"px";break;case"lineHeight":case"transform":d()}}},toggles:function(){this.pageFull=function(e){function t(){l.contains("page-fullscreen")||(b._this._global_.webpagePlugin.isPagefull=!0,b.$el.mPlayer.classList.add("page-fullscreen"),n[0].style.display="none",n[1].style.display="block",n[0].parentNode.setAttribute("tooltip",b.$method.getLangObject().exitPageScreen),b._this.emit("pagefull-change",{pagefull:!0})),e instanceof Object&&b.$method.changeVideoSize({type:"pagefulll"})}function o(){l.contains("page-fullscreen")&&(b._this._global_.webpagePlugin.isPagefull=!1,b.$el.mPlayer.classList.remove("page-fullscreen"),n[0].style.display="block",n[1].style.display="none",n[0].parentNode.setAttribute("tooltip",b.$method.getLangObject().pageScreen),b._this.emit("pagefull-change",{pagefull:!1})),e instanceof Object&&b.$method.changeVideoSize({type:"pagefulll"})}var n=b.$el.mPlayer.querySelectorAll("._fullpage,._unfullpage"),l=b.$el.mPlayer.classList;"change"==e?o():"initFullFixed"==e?t():((b.$el.mPlayer.classList.contains("page-fullscreen")?o:t)(),b.$data.isFullScreen&&b.$method.fullToggle())},this.timeControls=function(e){var n=b.$el.mPlayer.querySelector("#current-time");e?function e(){var t=new Date,o=t.getHours()<10?"0"+t.getHours():t.getHours(),t=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes();n&&(n.innerHTML=o+":"+t,n.style.display="inline-block"),b._this._global_.webpagePlugin.timer_1&&clearInterval(b._this._global_.webpagePlugin.timer_1),b._this._global_.webpagePlugin.timer_1=setTimeout(function(){b.$data.isFullScreen&&b.$data.showScreenControls&&e()},1e3)}():n&&(n.style.display="none")},this.scaleControls=function(e){var t,o,n,l,i,r,a,s,c,u,p=b.$el.mPlayer.classList;e&&p.contains("fullscreen-scaling")||(e||p.contains("fullscreen-scaling"))&&(o=y.fullScalingControls||[],(t=function(e){for(var t=0;t<e.length;t++)for(var o=b.$el.mPlayer.querySelectorAll(e[t].selector),n=0;n<o.length;n++)w.setElScale(o[n],e[t].attr)})(o),t([{selector:".mplayer-header,.mplayer-footer",attr:["height"]},{selector:".header-control,.footer-control,.mplayer-sidebar",attr:["width","fontSize"]},{selector:"#mplayer-loading .mplayer-loading__circular",attr:{width:40,height:40}},{selector:".mplayer-shortcut",attr:{width:430}},{selector:".mplayer-shortcut .title",attr:{fontSize:16}},{selector:".mplayer-shortcut .close-shortcut-panel",attr:{width:24,height:24}},{selector:".mplayer-shortcut ul",attr:{fontSize:14}},{selector:"#progress-total,#progress-buffered,#progress-play,#progress-prompt,#progress-seekline",attr:{height:2}},{selector:"#progress-prompt,#progress-seekline",attr:["width"]},{selector:"#progress-ball .progress-ball",attr:{width:15,height:15}},{selector:"#mplayer-toast",attr:["fontSize"]},{selector:"#mplayer-footer .spot",attr:["height","width"]}]),e?(n="@-webkit-keyframes mp-bezel-fadeout {from{opacity: 1;}to{opacity: 0;-webkit-transform: scale("+1.5*g+");transform: scale("+1.5*g+");}}@keyframes mp-bezel-fadeout {from{opacity: 1;}to{opacity: 0;-webkit-transform: scale("+1.5*g+");transform: scale("+1.5*g+");}}",l=".mp-tooltip {font-size:"+12*g+"px !important;}",i=".mp-thumbnails.thumbnails-scale {-webkit-transform: scale("+g+");-ms-transform: scale("+g+");transform: scale("+g+");-webkit-transform-origin: left bottom;-ms-transform-origin: left bottom;transform-origin: left bottom;}",r=".toast-scaling{font-size: "+14*g+"px !important;}",a=".mp-keyboard-focus .mp-menuitem:focus {box-shadow: inset 0 0 0 "+2*g+"px rgba(27,127,204,0.8) !important;}.mp-keyboard-focus .keyboard-input:focus {box-shadow: inset 0 0 0 "+2*g+"px rgba(27,127,204,0.8) !important;}",s="",b.$el.mPlayer.querySelector("#progress-container")&&(c=b.$el.mPlayer.querySelector("#progress-container").getBoundingClientRect(),u=b.$el.mPlayer.querySelector("#progress-container #progress-total").getBoundingClientRect(),s=".mplayer-footer .progress .progress-container.upper-position {margin-bottom: -"+(c.height-u.height)/2+"px !important;}"),(u=(c=document.getElementsByTagName("head").item(0)).querySelector("#player-scaling-style"))?b.$method.removeNode(c,"#player-scaling-style"):((u=document.createElement("style")).setAttribute("id","player-scaling-style"),u.setAttribute("type","text/css")),u.innerHTML=n+l+i+r+a+s,c.appendChild(u)):b.$method.removeNode(document.getElementsByTagName("head").item(0),"#player-scaling-style"),e?p.add("fullscreen-scaling"):p.remove("fullscreen-scaling"))}},showHandleIcon:function(e){var t='<svg t="1598581427609" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2856" width="24" height="24"><path d="M267.58370352 186.11160469h162.94419765v651.77679062H267.58370352zM593.47209883 186.11160469h162.94419765v651.77679062h-162.94419765z" p-id="2857" fill="#ffffff"></path></svg>',o='<svg t="1598581671973" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2357" width="24" height="24"><path d="M287.49910545 187.55999756l502.5923252 324.51242209-502.5923252 324.44000244z" p-id="2358" fill="#ffffff"></path></svg>',n='<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16579" width="100%" height="100%"><path d="M512 8v237.17647013h237.17647013m148.23529481 266.82352987a59.29411753 59.29411753 0 1 1-59.29411753 59.29411753 59.29411753 59.29411753 0 0 1 59.29411753-59.29411753zM512 245.17647012a326.11764741 326.11764741 0 1 0 326.11764741 326.11764741h118.58823506A444.70588247 444.70588247 0 1 1 512 126.58823506v118.58823507z m-60.77647013 140.17129482l-24.90352987 194.3068237a300.23576494 300.23576494 0 0 1 48.32470617-3.20188247c71.74588247 0 106.72941136 32.61176494 106.72941136 84.34588247a81.79623506 81.79623506 0 0 1-85.68 83.27858766 166.70541136 166.70541136 0 0 1-77.97176494-20.30823507l-13.93411753 46.99058864a191.31247013 191.31247013 0 0 0 93.9811763 22.4131763 137.76988247 137.76988247 0 0 0 146.75294123-137.71058864c0-82.21129383-63.14823506-124.93270617-136.08-124.93270617-11.26588247 0-18.67764741 1.06729383-26.68235259 1.60094123l13.3411763-95.55247012h140.82352987v-51.23011753h-184.70117629z" p-id="16580" fill="#ffffff"></path></svg>',l='<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16817" width="100%" height="100%"><path d="M512 1016A444.70588247 444.70588247 0 0 1 67.29411753 571.29411753a59.29411753 59.29411753 0 0 1 118.58823506 0A326.11764741 326.11764741 0 1 0 512 245.17647012V126.58823506a444.70588247 444.70588247 0 0 1 0 889.41176494z m108.50823506-360.53788247a137.76988247 137.76988247 0 0 1-146.75294123 137.71058864 190.42305877 190.42305877 0 0 1-93.9811763-22.4131763l13.63764741-46.99058864a166.70541136 166.70541136 0 0 0 77.97176493 20.30823507 82.03341136 82.03341136 0 0 0 85.97647013-83.27858766c0-51.79341136-35.28-84.34588247-106.72941136-84.34588247a304.23811753 304.23811753 0 0 0-48.62117728 3.20188247l25.2-194.3068237h184.70117728v51.23011753h-140.82352987l-13.3411763 95.55247012c8.00470617-0.53364741 15.41647013-1.60094123 26.68235259-1.60094123 72.93176494 0 136.08 42.72141136 136.08 124.93270617zM512 8v237.17647013H274.82352987z" p-id="16818" fill="#ffffff"></path></svg>',i=b.$el.mPlayer.querySelector(".mp-bezel-text-hide");switch(e){case"mouseclick":b.$data.isPlay?i.querySelector(".mp-bezel-icon").innerHTML=t:i.querySelector(".mp-bezel-icon").innerHTML=o;break;case"progress-forward":i.querySelector(".mp-bezel-icon").innerHTML=n;break;case"progress-back":i.querySelector(".mp-bezel-icon").innerHTML=l;break;case"volume-icon":i.querySelector(".mp-bezel-icon").innerHTML=f.toggleVolumeIcon()}"none"==i.style.display?i.style.display="block":(i.style.display="none",b._this._global_.webpagePlugin.handleIconTimer_1||(b._this._global_.webpagePlugin.handleIconTimer_1=setTimeout(function(){b._this._global_.webpagePlugin.handleIconTimer_1=!1,i.style.display="block"},15))),b._this._global_.webpagePlugin.handleIconTimer_2&&window.clearTimeout(b._this._global_.webpagePlugin.handleIconTimer_2),b._this._global_.webpagePlugin.handleIconTimer_2=setTimeout(function(){i.style.display="none"},400)},buildBasePanel:function(e){var t=e.querySelector("#right-part"),o=document.createElement("button");o.setAttribute("class","player-btn keyboard-input footer-control"),o.setAttribute("id","volume-switch"),o.setAttribute("control",""),o.innerHTML=f.toggleVolumeIcon(),t.insertBefore(o,t.childNodes[t.childNodes.length-1]),o.addEventListener("mouseover",f.showVolumePopup),o.addEventListener("click",f.onClickEvent),!document.pictureInPictureEnabled||e.querySelector("video").disablePictureInPicture||((n=document.createElement("button")).setAttribute("class","player-btn keyboard-input footer-control picture-in-picture"),n.setAttribute("id","picture-in-picture"),n.setAttribute("tooltip",b.$method.getLangObject().pictureInPicture),n.setAttribute("control",""),n.innerHTML=s.togglePictureIcon(),t.insertBefore(n,t.childNodes[t.childNodes.length-1]),n.addEventListener("click",s.onPictureInPicture)),a("statics");var n=(b.option.subtitle||{}).tracks;(0<p.settingConfigs.length||Array.isArray(n)&&0<n.length)&&((l=document.createElement("button")).setAttribute("class","player-btn keyboard-input footer-control"),l.setAttribute("id","setting-switch"),l.setAttribute("control",""),l.innerHTML='<svg t="1607605827678" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2386"><path d="M857.9375 512c0-49.125 30.84375-90.75 74.0625-107.34375-10.3125-40.5-26.25-78.65625-47.0625-113.71875C842.5625 309.78125 791.375 302.09375 756.6875 267.3125c-34.6875-34.6875-42.375-85.96875-23.53125-128.25C698 118.25 659.84375 102.3125 619.34375 92c-16.6875 43.21875-58.3125 74.0625-107.34375 74.0625-49.125 0-90.75-30.84375-107.34375-74.0625-40.5 10.3125-78.65625 26.25-113.71875 47.0625 18.84375 42.375 11.15625 93.5625-23.53125 128.25-34.6875 34.6875-85.96875 42.375-128.25 23.625C118.25 326 102.3125 364.15625 92 404.65625c43.21875 16.6875 74.0625 58.3125 74.0625 107.34375 0 49.125-30.84375 90.75-74.0625 107.34375 10.3125 40.5 26.25 78.65625 47.0625 113.71875C181.4375 714.21875 232.625 721.90625 267.3125 756.6875c34.6875 34.6875 42.375 85.96875 23.53125 128.25C326 905.75 364.15625 921.6875 404.65625 932c16.6875-43.21875 58.3125-74.0625 107.34375-74.0625 49.125 0 90.75 30.84375 107.34375 74.0625 40.5-10.3125 78.65625-26.25 113.71875-47.0625-18.84375-42.375-11.15625-93.5625 23.53125-128.25 34.6875-34.6875 85.96875-42.375 128.25-23.625C905.75 698 921.6875 659.84375 932 619.34375c-43.21875-16.59375-74.0625-58.21875-74.0625-107.34375zM512 627.3125c-63.65625 0-115.3125-51.65625-115.3125-115.3125s51.65625-115.3125 115.3125-115.3125 115.3125 51.65625 115.3125 115.3125-51.65625 115.3125-115.3125 115.3125z" p-id="2387" fill="#ffffff"></path></svg>',t.insertBefore(l,t.childNodes[t.childNodes.length-1]),l.addEventListener("mouseover",function(e){p.name="settingConfigs",h.showSettingPopup(e)}));var l=document.createElement("button");l.setAttribute("class","player-btn keyboard-input footer-control"),l.setAttribute("id","pagefull-switch"),l.setAttribute("tooltip",b.$method.getLangObject().pageScreen),l.setAttribute("control",""),l.innerHTML='<div class="_fullpage"controls="full-page"><svg t="1607605504727"class="icon"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="2356"><path d="M948.90666667 851.69493333H75.09333333c-27.30666667 0-49.152-21.84533333-49.152-43.69066666v-655.36c0-27.30666667 21.84533333-49.152 49.152-49.152h873.81333334c27.30666667 0 43.69066667 21.84533333 43.69066666 49.152v655.36c0 27.30666667-16.384 43.69066667-43.69066666 43.69066666z m-824.66133334-87.38133333h780.97066667V196.33493333H124.24533333v567.97866667z"p-id="2357"fill="#ffffff"></path><path d="M238.93333333 496.70826667c-21.84533333 0-43.69066667-16.384-43.69066666-43.69066667v-136.53333333c0-21.84533333 16.384-43.69066667 43.69066666-43.69066667h136.53333334c21.84533333 0 43.69066667 16.384 43.69066666 43.69066667s-21.84533333 38.22933333-43.69066666 38.22933333H282.624v98.304c0 21.84533333-21.84533333 43.69066667-43.69066667 43.69066667zM785.06666667 687.85493333h-136.53333334c-21.84533333 0-43.69066667-16.384-43.69066666-43.69066666s16.384-43.69066667 43.69066666-43.69066667h92.84266667v-98.304c0-21.84533333 16.384-43.69066667 43.69066667-43.69066667s43.69066667 16.384 43.69066666 43.69066667v141.99466667c-5.46133333 21.84533333-21.84533333 43.69066667-43.69066666 43.69066666z"p-id="2358"fill="#ffffff"></path></svg></div><div class="_unfullpage"controls="unfull-page"style="display: none;"><svg t="1607605550628"class="icon"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="2519"><path d="M948.90666667 851.69493333H75.09333333c-27.30666667 0-49.152-21.84533333-49.152-43.69066666v-655.36c0-27.30666667 21.84533333-49.152 49.152-49.152h873.81333334c27.30666667 0 43.69066667 21.84533333 43.69066666 49.152v655.36c0 27.30666667-16.384 43.69066667-43.69066666 43.69066666z m-824.66133334-87.38133333h780.97066667V196.33493333H124.24533333v567.97866667z"p-id="2520"fill="#ffffff"></path><path d="M375.46666667 496.70826667H238.93333333c-21.84533333 0-43.69066667-16.384-43.69066666-43.69066667s21.84533333-38.22933333 43.69066666-38.22933333h92.84266667v-98.304c0-21.84533333 16.384-43.69066667 43.69066667-43.69066667s38.22933333 21.84533333 38.22933333 43.69066667v136.53333333c0 21.84533333-16.384 43.69066667-38.22933333 43.69066667zM648.53333333 687.85493333c-21.84533333 0-43.69066667-16.384-43.69066666-43.69066666v-136.53333334c0-21.84533333 16.384-43.69066667 43.69066666-43.69066666H785.06666667c21.84533333 0 43.69066667 16.384 43.69066666 43.69066666s-16.384 43.69066667-43.69066666 43.69066667h-92.84266667v92.84266667c-5.46133333 21.84533333-21.84533333 43.69066667-43.69066667 43.69066666z"p-id="2521"fill="#ffffff"></path></svg></div>',t.insertBefore(l,t.childNodes[t.childNodes.length-1]),l.addEventListener("click",(new w.toggles).pageFull),b.$method.removeNode(e,"#back-button #back-icon-svg");l=document.createElement("button");b.$method.setElementStyle(l,{fontSize:"18px",color:"#FFFFFF",width:"auto"}),l.setAttribute("class","player-btn header-control"),l.setAttribute("id","current-time"),l.setAttribute("control",""),l.innerHTML='<div id="" style="display: none;"></div>',e.querySelector("#buttom-group").appendChild(l);e.appendChild(b.$method.createRangeIsDocFragment('<div style="display: none;"class="mp-bezel-text-hide"><div class="mp-bezel"><div class="mp-bezel-icon"></div></div></div>'));l=document.createElement("div");l.setAttribute("class","ctxmenu-wrapper"),l.setAttribute("id","ctxmenu-wrapper"),l.addEventListener("click",function(e){e.stopPropagation()}),e.appendChild(l);var i=document.createElement("div");i.setAttribute("class","mplayer-shortcut"),i.setAttribute("id","mplayer-shortcut");l=b.$method.getLangObject().shortcutsPanel;return i.innerHTML='<p class="title">'+l.title+'</p><div class="close-shortcut-panel"><svg height="100%" viewBox="0 0 24 24" width="100%"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="#fff"></path></svg></div><ul><li><label>'+l.space+"：</label><span>"+l.spaceAction+"</span></li><li><label>Esc：</label><span>"+l.esc+"</span></li></ul><ul><li><label>↑：</label><span>"+l.up+"</span></li><li><label>↓：</label><span>"+l.down+"</span></li></ul><ul><li><label>→：</label><span>"+l.right+"</span></li><li><label>←：</label><span>"+l.left+"</span></li></ul>",i.addEventListener("click",function(e){e.stopPropagation()}),i.addEventListener("dblclick",function(e){e.stopPropagation()}),i.addEventListener("mouseup",function(e){e.stopPropagation()}),i.querySelector(".close-shortcut-panel").addEventListener("click",function(){i.style.display="none"}),e.appendChild(i),v._createDanmakuInput&&v._createDanmakuInput(e),v._createSeekLine&&v._createSeekLine(e),e},initConfigControls:function(e){1!=b.option.live&&((i=document.createElement("button")).setAttribute("class","player-btn footer-control keyboard-input"),i.setAttribute("style","color: white;display: flex;align-items: center;width: auto;"),i.innerHTML='<div class="progress-begin" id="progress-begin"style="width: initial;margin-right: 5px;font-size: inherit;">'+b.$method.getLangObject().begin+'</div><div class="time-symbol">/</div><div class="progress-long" id="progress-long" style="color: #dddddd;width: initial;margin-left: 5px;font-size: inherit;">'+b.$method.getLangObject().end+"</div>",b.$method.setElementStyle(i,{color:"#FFFFFF",display:"flex",width:"auto"}),b.$method.removeNode(e,"#progress-begin"),b.$method.removeNode(e,"#progress-long"),e.querySelector("#left-part").appendChild(i)),e.querySelector("#progress-ball")&&e.querySelector("#progress-ball").classList.add("default-scale"),e.querySelector(".progress-ball")&&(e.querySelector(".progress-ball").style.height="15px"),e.querySelector(".progress-ball")&&(e.querySelector(".progress-ball").style.width="15px"),e.querySelector("#progress-container")&&e.querySelector("#progress-container").setAttribute("style","left: 12px;right: 12px;"),e.querySelector("#touch-effective")&&(e.querySelector("#touch-effective").style.margin="0");for(var t=e.querySelectorAll("#progress-total,#progress-buffered,#progress-play"),o=0;o<t.length;o++)t[o]&&t[o].classList.add("progress-default-scale");var n=f.getStorageVolume(),l=n.expiration,i=n.muted,n=n.volume;return"number"==typeof l&&l>(new Date).getTime()?("boolean"==typeof i&&(e.querySelector("video").muted=i),"number"==typeof n&&(e.querySelector("video").volume=0<n&&n<100?Number.parseInt(n)/100:1)):(n=b.option.volume,f.setStorageVolume(0<=n&&n<=1?100*n:100)),!0===b.option.muted&&(e.querySelector("video").muted=!0,f.setStorageVolume(null,!0)),e=w.buildBasePanel(e)},onDurationChange:function(e){v._addPrompt&&v._addPrompt(e.duration,"durationChangeSymbol")},onFullscreenChange:function(e){b._this._global_.isReady&&(v.toggleDanmakuStatus&&v.toggleDanmakuStatus(e),e.fullscreen?((new w.toggles).pageFull("change"),(new w.toggles).timeControls(!0),(new w.toggles).scaleControls(!0)):((new w.toggles).scaleControls(!1),(new w.toggles).timeControls(!1),(new w.popupInstance).togglePopupVisible("OFF")))},onControlsToggle:function(e){e.show||(new w.popupInstance).togglePopupVisible("OFF"),b.$data.isFullScreen&&(new w.toggles).timeControls(e.show);function t(e){b.$el.mPlayer.style.cursor=e}b._this._global_.webpagePlugin.timer_2&&clearTimeout(b._this._global_.webpagePlugin.timer_2),e.show||!b.$data.isFullScreen&&!b._this._global_.webpagePlugin.isPagefull?t("default"):b._this._global_.webpagePlugin.timer_2=setTimeout(function(){b.$data.isShowRightSidebar||t("none")},1e3)},onReady:function(){var e;"function"==typeof b.$el&&(e=new b.$el,b.$el=e),!0===b.option.initFullFixed&&(new w.toggles).pageFull("initFullFixed"),w.addFocusKeyboardHandle(),w.addControlTooltip(),w.toggleEventListenerGlobal("add","playerReady"),t.addProto(),v._addPrompt&&v._addPrompt("","readyChangeSymbol")},onDestroy:function(){w.toggleEventListenerGlobal("remove","playerDestroy")},onError:function(){w.toggleEventListenerGlobal("remove","playerError")},onAction:function(e){var t="add"==e?"on":"off";b._this[t]("duration-change",w.onDurationChange),b._this[t]("fullscreen-change",w.onFullscreenChange),b._this[t]("controls-toggle",w.onControlsToggle),b._this[t]("ready",w.onReady,"MASTER"),b._this[t]("error",w.onError),setTimeout(function(){b._this[t]("destroy",w.onDestroy)})},vaks:function(){return!1},toggleEventListenerGlobal:function(e,t){var o="add"==e?"addEventListener":"removeEventListener";b._this._global_.webpagePlugin.eventStatus=o;b.$el.touchEffective instanceof Element&&b.$el.touchEffective[o]("mouseover",w.onEffectiveOverEvent),b.$el.mPlayer&&b.$el.mPlayer[o]("mousemove",w.onMpMousemoveEvent),b.$el.mPlayer&&!0===y.leaveHiddenControls&&b.$el.mPlayer[o]("mouseleave",w.onMpMouseleaveEvent),b.$el.mPlayer&&b.$el.mPlayer[o]("keydown",n.onDocKeydown),b.$el.mPlayer&&b.$el.mPlayer[o]("mouseup",c.createCtxmenu),b.$el.mPlayer&&b.$el.mPlayer[o]("contextmenu",c.onContextmenuEvent),"playerDestroy"==t&&w.onAction("remove")}};this.addProto=function(){},this.interface=function(t){this._onAgentMpTap=function(e){if("click"==e)return b.$method.onPlayTap({type:"dblscreen"}),w.showHandleIcon("mouseclick"),void("removeEventListener"==b._this._global_.webpagePlugin.eventStatus&&this._addEvent());"dbclick"!=e||w.vaks()&&b.$el.mPlayer.hasAttribute("miniplayer")||b.$method.fullToggle(t)},this._removeEvent=function(){w.vaks()&&w.toggleEventListenerGlobal("remove","activeRemove")},this._addEvent=function(){w.vaks()&&w.toggleEventListenerGlobal("add")}},this.appendTemplate=function(e,t){b={},b=t,console.info("loading mui player desktop plugin...");return Object.keys(v).forEach(function(e){delete v[e]}),w.onAction("add"),e=w.initConfigControls(e)},this.name="MuiPlayerDesktopPlugin"}});